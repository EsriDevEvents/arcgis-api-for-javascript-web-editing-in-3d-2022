var Ut=Object.defineProperty,Rt=Object.defineProperties;var Mt=Object.getOwnPropertyDescriptors;var Qe=Object.getOwnPropertySymbols;var Gt=Object.prototype.hasOwnProperty,Dt=Object.prototype.propertyIsEnumerable;var et=(e,t,r)=>t in e?Ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ie=(e,t)=>{for(var r in t||(t={}))Gt.call(t,r)&&et(e,r,t[r]);if(Qe)for(var r of Qe(t))Dt.call(t,r)&&et(e,r,t[r]);return e},he=(e,t)=>Rt(e,Mt(t));import{V as fe,hG as Nt,hH as Ft,lR as Bt,qC as oe,ac as $,ad as K,j as Vt,ae as Ke,f9 as We,gf as tt,k as _t,a8 as te,qL as Ue,aM as $t,nR as rt,qM as De,qN as Ne,qO as jt,qP as nt,qQ as it,a7 as Te,qR as ke,qS as at,d3 as Kt,qT as st,qE as Wt}from"./vendor.1dc52be5.js";var Fe,ot,lt,bt={exports:{}};ot=bt,Fe=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(t){var r=this.buffer,f=r?r.byteLength:0;if(t<f)return r;for(var c=512;c<t;)c<<=1;for(var l=new Uint8Array(c),p=0;p<f;++p)l[p]=r[p];return this.buffer=l},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var r=this.pos;if(t){this.ensureBuffer(r+t);for(var f=r+t;!this.eof&&this.bufferLength<f;)this.readBlock();var c=this.bufferLength;f>c&&(f=c)}else{for(;!this.eof;)this.readBlock();f=this.bufferLength}return this.pos=f,this.buffer.subarray(r,f)},lookChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,r,f){for(var c=t+r;this.bufferLength<=c&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,r,f)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0}},e}(),(lt=function(){if(!self||!self.Uint32Array)return null;var e=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),r=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),f=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],c=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function l(n){throw new Error(n)}function p(n){var u=0,a=n[u++],o=n[u++];a!=-1&&o!=-1||l("Invalid header in flate stream"),(15&a)!=8&&l("Unknown compression method in flate stream"),((a<<8)+o)%31!=0&&l("Bad FCHECK in flate stream"),32&o&&l("FDICT bit set in flate stream"),this.bytes=n,this.bytesPos=u,this.codeSize=0,this.codeBuf=0,Fe.call(this)}return p.prototype=Object.create(Fe.prototype),p.prototype.getBits=function(n){for(var u,a=this.codeSize,o=this.codeBuf,m=this.bytes,d=this.bytesPos;a<n;)(u=m[d++])===void 0&&l("Bad encoding in flate stream"),o|=u<<a,a+=8;return u=o&(1<<n)-1,this.codeBuf=o>>n,this.codeSize=a-=n,this.bytesPos=d,u},p.prototype.getCode=function(n){for(var u=n[0],a=n[1],o=this.codeSize,m=this.codeBuf,d=this.bytes,v=this.bytesPos;o<a;){var A;(A=d[v++])===void 0&&l("Bad encoding in flate stream"),m|=A<<o,o+=8}var g=u[m&(1<<a)-1],w=g>>16,i=65535&g;return(o==0||o<w||w==0)&&l("Bad encoding in flate stream"),this.codeBuf=m>>w,this.codeSize=o-w,this.bytesPos=v,i},p.prototype.generateHuffmanTable=function(n){for(var u=n.length,a=0,o=0;o<u;++o)n[o]>a&&(a=n[o]);for(var m=1<<a,d=new Uint32Array(m),v=1,A=0,g=2;v<=a;++v,A<<=1,g<<=1)for(var w=0;w<u;++w)if(n[w]==v){var i=0,h=A;for(o=0;o<v;++o)i=i<<1|1&h,h>>=1;for(o=i;o<m;o+=g)d[o]=v<<16|w;++A}return[d,a]},p.prototype.readBlock=function(){function n(U,G,N,F,B){for(var Y=U.getBits(N)+F;Y-- >0;)G[g++]=B}var u=this.getBits(3);if(1&u&&(this.eof=!0),(u>>=1)!=0){var a,o;if(u==1)a=f,o=c;else if(u==2){for(var m=this.getBits(5)+257,d=this.getBits(5)+1,v=this.getBits(4)+4,A=Array(e.length),g=0;g<v;)A[e[g++]]=this.getBits(3);for(var w=this.generateHuffmanTable(A),i=0,h=(g=0,m+d),S=new Array(h);g<h;){var b=this.getCode(w);b==16?n(this,S,2,3,i):b==17?n(this,S,3,3,i=0):b==18?n(this,S,7,11,i=0):S[g++]=i=b}a=this.generateHuffmanTable(S.slice(0,m)),o=this.generateHuffmanTable(S.slice(m,h))}else l("Unknown block type in flate stream");for(var s=(O=this.buffer)?O.length:0,T=this.bufferLength;;){var y=this.getCode(a);if(y<256)T+1>=s&&(s=(O=this.ensureBuffer(T+1)).length),O[T++]=y;else{if(y==256)return void(this.bufferLength=T);var E=(y=t[y-=257])>>16;E>0&&(E=this.getBits(E)),i=(65535&y)+E,y=this.getCode(o),(E=(y=r[y])>>16)>0&&(E=this.getBits(E));var I=(65535&y)+E;T+i>=s&&(s=(O=this.ensureBuffer(T+i)).length);for(var k=0;k<i;++k,++T)O[T]=O[T-I]}}}else{var C,L=this.bytes,x=this.bytesPos;(C=L[x++])===void 0&&l("Bad block header in flate stream");var P=C;(C=L[x++])===void 0&&l("Bad block header in flate stream"),P|=C<<8,(C=L[x++])===void 0&&l("Bad block header in flate stream");var R=C;(C=L[x++])===void 0&&l("Bad block header in flate stream"),(R|=C<<8)!=(65535&~P)&&l("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var D=this.bufferLength,O=this.ensureBuffer(D+P),V=D+P;this.bufferLength=V;for(var _=D;_<V;++_){if((C=L[x++])===void 0){this.eof=!0;break}O[_]=C}this.bytesPos=x}},p}())!==void 0&&(ot.exports=lt);const be=bt.exports;class ze{constructor(t){t&&(this.canvas=t.canvas,this.ctx=t.ctx||t.canvas&&t.canvas.getContext("2d"))}decode(t,r,f){if(!t||t.byteLength<10)throw new fe("imagecanvasdecoder: decode","required a valid encoded data as input.");let{width:c,height:l,format:p}=r;const{applyJpegMask:n}=r;if(n&&(!c||!l))throw new fe("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((u,a)=>{let o=null;p==="jpg"&&n&&(o=ze._getMask(t,{width:c,height:l}));const m=new Blob([new Uint8Array(t)],{type:"image/"+p=="jpg"?"jpeg":p}),d=URL.createObjectURL(m),v=new Image;let A;v.src=d,v.onload=()=>{if(URL.revokeObjectURL(d),Nt(f))return void a(Ft());c=v.width,l=v.height,this.canvas?(this.canvas.width===c&&this.canvas.height===l||(this.canvas.width=c,this.canvas.height=l),this.ctx.clearRect(0,0,c,l)):(this.canvas=document.createElement("canvas"),this.canvas.width=c,this.canvas.height=l,this.ctx=this.canvas.getContext("2d")),this.ctx.drawImage(v,0,0);const g=this.ctx.getImageData(0,0,c,l);let w;if(A=g.data,r.renderOnCanvas){if(o)for(w=0;w<o.length;w++)o[w]?A[4*w+3]=255:A[4*w+3]=0;return this.ctx.putImageData(g,0,0),void u(null)}const i=c*l,h=new Uint8Array(i),S=new Uint8Array(i),b=new Uint8Array(i);if(o)for(w=0;w<i;w++)h[w]=A[4*w],S[w]=A[4*w+1],b[w]=A[4*w+2];else for(o=new Uint8Array(i),w=0;w<i;w++)h[w]=A[4*w],S[w]=A[4*w+1],b[w]=A[4*w+2],o[w]=A[4*w+3];u({width:c,height:l,pixels:[h,S,b],mask:o,pixelType:"u8"})},v.onerror=()=>{URL.revokeObjectURL(d),a("cannot load image")}})}static _getMask(t,r){let f=null;try{const c=new Uint8Array(t),l=Math.ceil(c.length/2);let p=0;const n=c.length-2;for(p=l;p<n&&(c[p]!==255||c[p+1]!==217);p++);if(p+=2,p<c.length-1){const u=new be(c.subarray(p)).getBytes();f=new Uint8Array(r.width*r.height);let a=0;for(let o=0;o<u.length;o++)for(let m=7;m>=0;m--)f[a++]=u[o]>>m&1}}catch{}return f}}var ct,ut,ht,St={exports:{}};ct=St,ut=function(){var e=function(){function t(r){this.message="JPEG error: "+r}return t.prototype=new Error,t.prototype.name="JpegError",t.constructor=t,t}();return function(){if(!self||!self.Uint8ClampedArray)return null;var t=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),r=4017,f=799,c=3406,l=2276,p=1567,n=3784,u=5793,a=2896;function o(){this.decodeTransform=null,this.colorTransform=-1}function m(i,h){for(var S,b,s=0,T=[],y=16;y>0&&!i[y-1];)y--;T.push({children:[],index:0});var E,I=T[0];for(S=0;S<y;S++){for(b=0;b<i[S];b++){for((I=T.pop()).children[I.index]=h[s];I.index>0;)I=T.pop();for(I.index++,T.push(I);T.length<=S;)T.push(E={children:[],index:0}),I.children[I.index]=E.children,I=E;s++}S+1<y&&(T.push(E={children:[],index:0}),I.children[I.index]=E.children,I=E)}return T[0].children}function d(i,h,S){return 64*((i.blocksPerLine+1)*h+S)}function v(i,h,S,b,s,T,y,E,I){var k=S.mcusPerLine,C=S.progressive,L=h,x=0,P=0;function R(){if(P>0)return P--,x>>P&1;if((x=i[h++])===255){var M=i[h++];if(M)throw new e("unexpected marker "+(x<<8|M).toString(16))}return P=7,x>>>7}function D(M){for(var j=M;;){if(typeof(j=j[R()])=="number")return j;if(typeof j!="object")throw new e("invalid huffman sequence")}}function O(M){for(var j=0;M>0;)j=j<<1|R(),M--;return j}function V(M){if(M===1)return R()===1?1:-1;var j=O(M);return j>=1<<M-1?j:j+(-1<<M)+1}function _(M,j){var z=D(M.huffmanTableDC),X=z===0?0:V(z);M.blockData[j]=M.pred+=X;for(var ee=1;ee<64;){var se=D(M.huffmanTableAC),Z=15&se,re=se>>4;if(Z!==0){var Ot=t[ee+=re];M.blockData[j+Ot]=V(Z),ee++}else{if(re<15)break;ee+=16}}}function U(M,j){var z=D(M.huffmanTableDC),X=z===0?0:V(z)<<I;M.blockData[j]=M.pred+=X}function G(M,j){M.blockData[j]|=R()<<I}var N=0;function F(M,j){if(N>0)N--;else for(var z=T,X=y;z<=X;){var ee=D(M.huffmanTableAC),se=15&ee,Z=ee>>4;if(se!==0){var re=t[z+=Z];M.blockData[j+re]=V(se)*(1<<I),z++}else{if(Z<15){N=O(Z)+(1<<Z)-1;break}z+=16}}}var B,Y=0;function H(M,j){for(var z,X,ee=T,se=y,Z=0;ee<=se;){var re=t[ee];switch(Y){case 0:if(Z=(X=D(M.huffmanTableAC))>>4,(z=15&X)==0)Z<15?(N=O(Z)+(1<<Z),Y=4):(Z=16,Y=1);else{if(z!==1)throw new e("invalid ACn encoding");B=V(z),Y=Z?2:3}continue;case 1:case 2:M.blockData[j+re]?M.blockData[j+re]+=R()<<I:--Z==0&&(Y=Y===2?3:0);break;case 3:M.blockData[j+re]?M.blockData[j+re]+=R()<<I:(M.blockData[j+re]=B<<I,Y=0);break;case 4:M.blockData[j+re]&&(M.blockData[j+re]+=R()<<I)}ee++}Y===4&&--N==0&&(Y=0)}function Se(M,j,z,X,ee){var se=z%k;j(M,d(M,(z/k|0)*M.v+X,se*M.h+ee))}function ve(M,j,z){j(M,d(M,z/M.blocksPerLine|0,z%M.blocksPerLine))}var le,ne,ce,de,J,xe,pe=b.length;xe=C?T===0?E===0?U:G:E===0?F:H:_;var ae,me,Ce,Pe,ue=0;for(me=pe===1?b[0].blocksPerLine*b[0].blocksPerColumn:k*S.mcusPerColumn;ue<me;){var Le=s?Math.min(me-ue,s):me;for(ne=0;ne<pe;ne++)b[ne].pred=0;if(N=0,pe===1)for(le=b[0],J=0;J<Le;J++)ve(le,xe,ue),ue++;else for(J=0;J<Le;J++){for(ne=0;ne<pe;ne++)for(Ce=(le=b[ne]).h,Pe=le.v,ce=0;ce<Pe;ce++)for(de=0;de<Ce;de++)Se(le,xe,ue,ce,de);ue++}P=0,(ae=w(i,h))&&ae.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+ae.invalid),h=ae.offset);var ge=ae&&ae.marker;if(!ge||ge<=65280)throw new e("marker was not found");if(!(ge>=65488&&ge<=65495))break;h+=2}return(ae=w(i,h))&&ae.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+ae.invalid),h=ae.offset),h-L}function A(i,h,S){var b,s,T,y,E,I,k,C,L,x,P,R,D,O,V,_,U,G=i.quantizationTable,N=i.blockData;if(!G)throw new e("missing required Quantization Table.");for(var F=0;F<64;F+=8)L=N[h+F],x=N[h+F+1],P=N[h+F+2],R=N[h+F+3],D=N[h+F+4],O=N[h+F+5],V=N[h+F+6],_=N[h+F+7],L*=G[F],(x|P|R|D|O|V|_)!=0?(x*=G[F+1],P*=G[F+2],R*=G[F+3],D*=G[F+4],O*=G[F+5],V*=G[F+6],_*=G[F+7],s=(b=(b=u*L+128>>8)+(s=u*D+128>>8)+1>>1)-s,U=(T=P)*n+(y=V)*p+128>>8,T=T*p-y*n+128>>8,k=(E=(E=a*(x-_)+128>>8)+(k=O<<4)+1>>1)-k,I=(C=(C=a*(x+_)+128>>8)+(I=R<<4)+1>>1)-I,y=(b=b+(y=U)+1>>1)-y,T=(s=s+T+1>>1)-T,U=E*l+C*c+2048>>12,E=E*c-C*l+2048>>12,C=U,U=I*f+k*r+2048>>12,I=I*r-k*f+2048>>12,k=U,S[F]=b+C,S[F+7]=b-C,S[F+1]=s+k,S[F+6]=s-k,S[F+2]=T+I,S[F+5]=T-I,S[F+3]=y+E,S[F+4]=y-E):(U=u*L+512>>10,S[F]=U,S[F+1]=U,S[F+2]=U,S[F+3]=U,S[F+4]=U,S[F+5]=U,S[F+6]=U,S[F+7]=U);for(var B=0;B<8;++B)L=S[B],((x=S[B+8])|(P=S[B+16])|(R=S[B+24])|(D=S[B+32])|(O=S[B+40])|(V=S[B+48])|(_=S[B+56]))!=0?(s=(b=4112+((b=u*L+2048>>12)+(s=u*D+2048>>12)+1>>1))-s,U=(T=P)*n+(y=V)*p+2048>>12,T=T*p-y*n+2048>>12,y=U,k=(E=(E=a*(x-_)+2048>>12)+(k=O)+1>>1)-k,I=(C=(C=a*(x+_)+2048>>12)+(I=R)+1>>1)-I,U=E*l+C*c+2048>>12,E=E*c-C*l+2048>>12,C=U,U=I*f+k*r+2048>>12,I=I*r-k*f+2048>>12,L=(L=(b=b+y+1>>1)+C)<16?0:L>=4080?255:L>>4,x=(x=(s=s+T+1>>1)+(k=U))<16?0:x>=4080?255:x>>4,P=(P=(T=s-T)+I)<16?0:P>=4080?255:P>>4,R=(R=(y=b-y)+E)<16?0:R>=4080?255:R>>4,D=(D=y-E)<16?0:D>=4080?255:D>>4,O=(O=T-I)<16?0:O>=4080?255:O>>4,V=(V=s-k)<16?0:V>=4080?255:V>>4,_=(_=b-C)<16?0:_>=4080?255:_>>4,N[h+B]=L,N[h+B+8]=x,N[h+B+16]=P,N[h+B+24]=R,N[h+B+32]=D,N[h+B+40]=O,N[h+B+48]=V,N[h+B+56]=_):(U=(U=u*L+8192>>14)<-2040?0:U>=2024?255:U+2056>>4,N[h+B]=U,N[h+B+8]=U,N[h+B+16]=U,N[h+B+24]=U,N[h+B+32]=U,N[h+B+40]=U,N[h+B+48]=U,N[h+B+56]=U)}function g(i,h){for(var S=h.blocksPerLine,b=h.blocksPerColumn,s=new Int16Array(64),T=0;T<b;T++)for(var y=0;y<S;y++)A(h,d(h,T,y),s);return h.blockData}function w(i,h,S){function b(I){return i[I]<<8|i[I+1]}var s=i.length-1,T=S<h?S:h;if(h>=s)return null;var y=b(h);if(y>=65472&&y<=65534)return{invalid:null,marker:y,offset:h};for(var E=b(T);!(E>=65472&&E<=65534);){if(++T>=s)return null;E=b(T)}return{invalid:y.toString(16),marker:E,offset:T}}return o.prototype={parse:function(i){function h(){var M=i[y]<<8|i[y+1];return y+=2,M}function S(){var M=h(),j=y+M-2,z=w(i,j,y);z&&z.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+z.invalid),j=z.offset);var X=i.subarray(y,j);return y+=X.length,X}function b(M){for(var j=Math.ceil(M.samplesPerLine/8/M.maxH),z=Math.ceil(M.scanLines/8/M.maxV),X=0;X<M.components.length;X++){J=M.components[X];var ee=Math.ceil(Math.ceil(M.samplesPerLine/8)*J.h/M.maxH),se=Math.ceil(Math.ceil(M.scanLines/8)*J.v/M.maxV),Z=j*J.h,re=z*J.v*64*(Z+1);J.blockData=new Int16Array(re),J.blocksPerLine=ee,J.blocksPerColumn=se}M.mcusPerLine=j,M.mcusPerColumn=z}var s,T,y=0,E=null,I=null,k=[],C=[],L=[],x=h();if(x!==65496)throw new e("SOI not found");for(x=h();x!==65497;){var P,R,D;switch(x){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var O=S();x===65504&&O[0]===74&&O[1]===70&&O[2]===73&&O[3]===70&&O[4]===0&&(E={version:{major:O[5],minor:O[6]},densityUnits:O[7],xDensity:O[8]<<8|O[9],yDensity:O[10]<<8|O[11],thumbWidth:O[12],thumbHeight:O[13],thumbData:O.subarray(14,14+3*O[12]*O[13])}),x===65518&&O[0]===65&&O[1]===100&&O[2]===111&&O[3]===98&&O[4]===101&&(I={version:O[5]<<8|O[6],flags0:O[7]<<8|O[8],flags1:O[9]<<8|O[10],transformCode:O[11]});break;case 65499:for(var V=h()+y-2;y<V;){var _=i[y++],U=new Uint16Array(64);if(_>>4==0)for(R=0;R<64;R++)U[t[R]]=i[y++];else{if(_>>4!=1)throw new e("DQT - invalid table spec");for(R=0;R<64;R++)U[t[R]]=h()}k[15&_]=U}break;case 65472:case 65473:case 65474:if(s)throw new e("Only single frame JPEGs supported");h(),(s={}).extended=x===65473,s.progressive=x===65474,s.precision=i[y++],s.scanLines=h(),s.samplesPerLine=h(),s.components=[],s.componentIds={};var G,N=i[y++],F=0,B=0;for(P=0;P<N;P++){G=i[y];var Y=i[y+1]>>4,H=15&i[y+1];F<Y&&(F=Y),B<H&&(B=H);var Se=i[y+2];D=s.components.push({h:Y,v:H,quantizationId:Se,quantizationTable:null}),s.componentIds[G]=D-1,y+=3}s.maxH=F,s.maxV=B,b(s);break;case 65476:var ve=h();for(P=2;P<ve;){var le=i[y++],ne=new Uint8Array(16),ce=0;for(R=0;R<16;R++,y++)ce+=ne[R]=i[y];var de=new Uint8Array(ce);for(R=0;R<ce;R++,y++)de[R]=i[y];P+=17+ce,(le>>4==0?L:C)[15&le]=m(ne,de)}break;case 65501:h(),T=h();break;case 65498:h();var J,xe=i[y++],pe=[];for(P=0;P<xe;P++){var ae=s.componentIds[i[y++]];J=s.components[ae];var me=i[y++];J.huffmanTableDC=L[me>>4],J.huffmanTableAC=C[15&me],pe.push(J)}var Ce=i[y++],Pe=i[y++],ue=i[y++],Le=v(i,y,s,pe,T,Ce,Pe,ue>>4,15&ue);y+=Le;break;case 65535:i[y]!==255&&y--;break;default:if(i[y-3]===255&&i[y-2]>=192&&i[y-2]<=254){y-=3;break}throw new e("unknown marker "+x.toString(16))}x=h()}for(this.width=s.samplesPerLine,this.height=s.scanLines,this.jfif=E,this.eof=y,this.adobe=I,this.components=[],P=0;P<s.components.length;P++){var ge=k[(J=s.components[P]).quantizationId];ge&&(J.quantizationTable=ge),this.components.push({output:g(s,J),scaleX:J.h/s.maxH,scaleY:J.v/s.maxV,blocksPerLine:J.blocksPerLine,blocksPerColumn:J.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(i,h){var S,b,s,T,y,E,I,k,C,L,x,P=this.width/i,R=this.height/h,D=0,O=this.components.length,V=i*h*O,_=new Uint8ClampedArray(V),U=new Uint32Array(i),G=4294967288;for(I=0;I<O;I++){for(b=(S=this.components[I]).scaleX*P,s=S.scaleY*R,D=I,x=S.output,T=S.blocksPerLine+1<<3,y=0;y<i;y++)k=0|y*b,U[y]=(k&G)<<3|7&k;for(E=0;E<h;E++)for(L=T*((k=0|E*s)&G)|(7&k)<<3,y=0;y<i;y++)_[D]=x[L+U[y]],D+=O}var N=this.decodeTransform;if(N)for(I=0;I<V;)for(k=0,C=0;k<O;k++,I++,C+=2)_[I]=(_[I]*N[C]>>8)+N[C+1];return _},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:this.numComponents===3?this.colorTransform!==0:this.colorTransform===1},_convertYccToRgb:function(i){for(var h,S,b,s=0,T=i.length;s<T;s+=3)h=i[s],S=i[s+1],b=i[s+2],i[s]=h-179.456+1.402*b,i[s+1]=h+135.459-.344*S-.714*b,i[s+2]=h-226.816+1.772*S;return i},_convertYcckToRgb:function(i){for(var h,S,b,s,T=0,y=0,E=i.length;y<E;y+=4)h=i[y],S=i[y+1],b=i[y+2],s=i[y+3],i[T++]=S*(-660635669420364e-19*S+.000437130475926232*b-54080610064599e-18*h+.00048449797120281*s-.154362151871126)-122.67195406894+b*(-.000957964378445773*b+.000817076911346625*h-.00477271405408747*s+1.53380253221734)+h*(.000961250184130688*h-.00266257332283933*s+.48357088451265)+s*(-.000336197177618394*s+.484791561490776),i[T++]=107.268039397724+S*(219927104525741e-19*S-.000640992018297945*b+.000659397001245577*h+.000426105652938837*s-.176491792462875)+b*(-.000778269941513683*b+.00130872261408275*h+.000770482631801132*s-.151051492775562)+h*(.00126935368114843*h-.00265090189010898*s+.25802910206845)+s*(-.000318913117588328*s-.213742400323665),i[T++]=S*(-.000570115196973677*S-263409051004589e-19*b+.0020741088115012*h-.00288260236853442*s+.814272968359295)-20.810012546947+b*(-153496057440975e-19*b-.000132689043961446*h+.000560833691242812*s-.195152027534049)+h*(.00174418132927582*h-.00255243321439347*s+.116935020465145)+s*(-.000343531996510555*s+.24165260232407);return i},_convertYcckToCmyk:function(i){for(var h,S,b,s=0,T=i.length;s<T;s+=4)h=i[s],S=i[s+1],b=i[s+2],i[s]=434.456-h-1.402*b,i[s+1]=119.541-h+.344*S+.714*b,i[s+2]=481.816-h-1.772*S;return i},_convertCmykToRgb:function(i){for(var h,S,b,s,T=0,y=1/255,E=0,I=i.length;E<I;E+=4)h=i[E]*y,S=i[E+1]*y,b=i[E+2]*y,s=i[E+3]*y,i[T++]=255+h*(-4.387332384609988*h+54.48615194189176*S+18.82290502165302*b+212.25662451639585*s-285.2331026137004)+S*(1.7149763477362134*S-5.6096736904047315*b-17.873870861415444*s-5.497006427196366)+b*(-2.5217340131683033*b-21.248923337353073*s+17.5119270841813)-s*(21.86122147463605*s+189.48180835922747),i[T++]=255+h*(8.841041422036149*h+60.118027045597366*S+6.871425592049007*b+31.159100130055922*s-79.2970844816548)+S*(-15.310361306967817*S+17.575251261109482*b+131.35250912493976*s-190.9453302588951)+b*(4.444339102852739*b+9.8632861493405*s-24.86741582555878)-s*(20.737325471181034*s+187.80453709719578),i[T++]=255+h*(.8842522430003296*h+8.078677503112928*S+30.89978309703729*b-.23883238689178934*s-14.183576799673286)+S*(10.49593273432072*S+63.02378494754052*b+50.606957656360734*s-112.23884253719248)+b*(.03296041114873217*b+115.60384449646641*s-193.58209356861505)-s*(22.33816807309886*s+180.12613974708367);return i},getData:function(i,h,S){if(this.numComponents>4)throw new e("Unsupported color mode");var b=this._getLinearizedBlockData(i,h);if(this.numComponents===1&&S){for(var s=b.length,T=new Uint8ClampedArray(3*s),y=0,E=0;E<s;E++){var I=b[E];T[y++]=I,T[y++]=I,T[y++]=I}return T}if(this.numComponents===3&&this._isColorConversionNeeded())return this._convertYccToRgb(b);if(this.numComponents===4){if(this._isColorConversionNeeded())return S?this._convertYcckToRgb(b):this._convertYcckToCmyk(b);if(S)return this._convertCmykToRgb(b)}return b}},o}()},(ht=ut())!==void 0&&(ct.exports=ht);const Re=St.exports;class zt{static decode(t){const r=new Uint8Array(t),f=new Re;f.parse(r);const{width:c,height:l,numComponents:p,eof:n}=f,u=f.getData(c,l,!0);let a;const o=c*l;let m=0,d=0,v=0;if(n<r.length-1){const w=new be(r.subarray(n)).getBytes();a=new Uint8Array(o);let i=0;for(m=0;m<w.length;m++)for(v=7;v>=0;v--)a[i++]=w[m]>>v&1}let A,g=null;if(p===1)g=[u,u,u];else{for(g=[],m=0;m<3;m++)A=new Uint8Array(o),g.push(A);for(v=0,d=0;d<o;d++)for(m=0;m<3;m++)g[m][d]=u[v++]}return{width:c,height:l,pixels:g,mask:a}}}const vt=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,128]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-34027999387901484e22,34027999387901484e22]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-17976931348623157e292,17976931348623157e292]}];let Be=null;function Tt(){return Be||(Be=import("./lerc-wasm.4c614b8b.js").then(e=>e.l).then(({default:e})=>e({locateFile:t=>Bt(`esri/layers/support/rasterFormats/${t}`)})).then(e=>{qt(e)}),Be)}const Me={getBlobInfo:null,decode:null};function Jt(e){return 16+(e>>3<<3)}function qt(e){const{_malloc:t,_free:r,_lerc_getBlobInfo:f,_lerc_getDataRanges:c,_lerc_decode_4D:l,asm:p}=e;let n;const u=Object.values(p).find(o=>o&&"buffer"in o&&o.buffer===e.HEAPU8.buffer),a=o=>{const m=o.map(g=>Jt(g)),d=m.reduce((g,w)=>g+w),v=t(d);n=new Uint8Array(u.buffer);let A=m[0];m[0]=v;for(let g=1;g<m.length;g++){const w=m[g];m[g]=m[g-1]+A,A=w}return m};Me.getBlobInfo=o=>{const v=new Uint8Array(48),A=new Uint8Array(8*3),[g,w,i]=a([o.length,v.length,A.length]);n.set(o,g),n.set(v,w),n.set(A,i);let h=f(g,o.length,w,i,12,3);if(h)throw r(g),`lerc-getBlobInfo: error code is ${h}`;n=new Uint8Array(u.buffer),v.set(n.slice(w,w+v.length)),A.set(n.slice(i,i+A.length));const S=new Uint32Array(v.buffer),b=new Float64Array(A.buffer),[s,T,y,E,I,k,C,L,x,,P]=S,R={version:s,dimCount:y,width:E,height:I,validPixelCount:C,bandCount:k,blobSize:L,maskCount:x,dataType:T,minValue:b[0],maxValue:b[1],maxZerror:b[2],statistics:[],bandCountWithNoData:P};if(P)return R;if(y===1&&k===1)return r(g),R.statistics.push({minValue:b[0],maxValue:b[1]}),R;const D=y*k*8,O=new Uint8Array(D),V=new Uint8Array(D);let _,U=g,G=0,N=!1;if(n.byteLength<g+2*D?(r(g),N=!0,[U,G,_]=a([o.length,D,D]),n.set(o,U)):[G,_]=a([D,D]),n.set(O,G),n.set(V,_),h=c(g,o.length,y,k,G,_),h)throw r(U),N||r(G),`lerc-getDataRanges: error code is ${h}`;n=new Uint8Array(u.buffer),O.set(n.slice(G,G+D)),V.set(n.slice(_,_+D));const F=new Float64Array(O.buffer),B=new Float64Array(V.buffer),Y=R.statistics;for(let H=0;H<k;H++)if(y>1){const Se=F.slice(H*y,(H+1)*y),ve=B.slice(H*y,(H+1)*y),le=Math.min.apply(null,Se),ne=Math.max.apply(null,ve);Y.push({minValue:le,maxValue:ne,dimStats:{minValues:Se,maxValues:ve}})}else Y.push({minValue:F[H],maxValue:B[H]});return r(U),N||r(G),R},Me.decode=(o,m)=>{const{maskCount:d,dimCount:v,bandCount:A,width:g,height:w,dataType:i,bandCountWithNoData:h}=m,S=vt[i],b=g*w,s=new Uint8Array(b*A),T=b*v*A*S.size,y=new Uint8Array(T),E=new Uint8Array(A),I=8*A,k=new Uint8Array(I),[C,L,x,P,R]=a([o.length,s.length,y.length,E.length,k.length]);n.set(o,C),n.set(s,L),n.set(y,x),n.set(E,P),n.set(k,R);const D=l(C,o.length,d,L,v,g,w,A,i,x,P,R);if(D)throw r(C),`lerc-decode: error code is ${D}`;n=new Uint8Array(u.buffer),y.set(n.slice(x,x+T)),s.set(n.slice(L,L+b));let O=null;if(h){E.set(n.slice(P,P+A)),k.set(n.slice(R,R+I)),O=[];for(let V=0;V<E.length;V++)O.push(E[V]?k[V]:null)}return r(C),{data:y,maskData:s,noDataValues:O}}}function Yt(e,t,r,f,c){if(r<2)return e;const l=new f(t*r);if(c)for(let p=0,n=0;p<t;p++)for(let u=0,a=p;u<r;u++,a+=t)l[a]=e[n++];else for(let p=0,n=0;p<t;p++)for(let u=0,a=p;u<r;u++,a+=t)l[n++]=e[a];return l}function At(e,t={}){var r;const f=(r=t.inputOffset)!=null?r:0,c=e instanceof Uint8Array?e.subarray(f):new Uint8Array(e,f),l=Me.getBlobInfo(c),{data:p,maskData:n}=Me.decode(c,l),{width:u,height:a,bandCount:o,dimCount:m,dataType:d,maskCount:v,statistics:A}=l,g=vt[d],w=new g.ctor(p.buffer),i=[],h=[],S=u*a,b=S*m;for(let I=0;I<o;I++){const k=w.subarray(I*b,(I+1)*b);if(t.returnPixelInterleavedDims)i.push(k);else{const C=Yt(k,S,m,g.ctor,!0);i.push(C)}h.push(n.subarray(I*b,(I+1)*b))}const s=v===0?null:v===1?h[0]:new Uint8Array(S);if(v>1){s.set(h[0]);for(let I=1;I<h.length;I++){const k=h[I];for(let C=0;C<S;C++)s[C]=s[C]&k[C]}}const{noDataValue:T}=t,y=T!=null&&g.range[0]<=T&&g.range[1]>=T;if(v>0&&y){const{noDataValue:I}=t;for(let k=0;k<o;k++){const C=i[k],L=h[k]||s;for(let x=0;x<S;x++)L[x]===0&&(C[x]=I)}}const E=v===o&&o>1?h:null;return{width:u,height:a,bandCount:o,pixelType:t.pixelType&&l.version===0?t.pixelType:g.pixelType,dimCount:m,statistics:A,pixels:i,mask:s,bandMasks:E}}function Ht(e,t,r,f=!0){if(t%4!=0||r%4!=0){const c=new ArrayBuffer(4*Math.ceil(r/4)),l=new Uint8Array(c),p=new Uint8Array(e,t,r);if(f)for(let n=0;n<l.length;n+=4)l[n]=p[n+3],l[n+1]=p[n+2],l[n+2]=p[n+1],l[n+3]=p[n];else l.set(p);return new Uint32Array(l.buffer)}if(f){const c=new Uint8Array(e,t,r),l=new Uint8Array(c.length);for(let p=0;p<l.length;p+=4)l[p]=c[p+3],l[p+1]=c[p+2],l[p+2]=c[p+1],l[p+3]=c[p];return new Uint32Array(l.buffer)}return new Uint32Array(e,t,r/4)}function ft(){const e=[];for(let t=0;t<=257;t++)e[t]=[t];return e}function dt(e,t){for(let r=0;r<t.length;r++)e.push(t[r])}const Ae=new Set;function Je(e,t,r,f=!0){const c=Ht(e,t,r,f);let l=9,p=ft(),n=32,u=p.length,a=[],o=1,m=c[0],d=0;const v=c.length,A=8*(4*v-r),g=[];for(;m!=null;){if(n>=l)n-=l,d=m>>>32-l,m<<=l;else{d=m>>>32-n,m=c[o++];const i=l-n;n=32-i,d=(d<<i)+(m>>>n),m<<=i}if(d===257)break;if(d===256){l=9,p=ft(),u=p.length,a=[];continue}const w=p[d];if(w==null){if(d>p.length)throw"data integrity issue: code does not exist on code page";a.push(a[0]),p[u++]=a.slice(),dt(g,a)}else dt(g,w),a.push(w[0]),a.length>1&&(p[u++]=a.slice()),a=w.slice();if(Ae.has(u)&&l++,n===0&&(m=c[o++],n=32),o>v||o===v&&n<=A)break}return new Uint8Array(g)}Ae.add(511),Ae.add(1023),Ae.add(2047),Ae.add(4095),Ae.add(8191);const pt=function(e,t){const r=t.width*t.height,f=t.pixelType;return Math.floor(e.byteLength/(r*It(f)))},It=function(e){let t=1;switch(e){case Uint8Array:case Int8Array:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t},Xt=function(e,t){if(8*e.byteLength<t)return null;const r=new Uint8Array(e,0,Math.ceil(t/8)),f=new Uint8Array(t);let c=0,l=0,p=0,n=0;for(p=0;p<r.length-1;p++)for(l=r[p],n=7;n>=0;n--)f[c++]=l>>n&1;for(n=7;c<t-1;)l=r[r.length-1],f[c++]=l>>n&1,n--;return f};class Zt{static decode(t,r){const f=r.pixelType,c=[],l=r.width*r.height,p=pt(t,r),{bandIds:n,format:u}=r,a=n&&n.length||pt(t,r),o=t.byteLength-t.byteLength%(l*It(f)),m=new f(t,0,l*p);let d,v,A,g,w;if(u==="bip")for(d=0;d<a;d++){for(g=new f(l),w=n?n[d]:d,v=0;v<l;v++)g[v]=m[v*p+w];c.push(g)}else if(u==="bsq")for(d=0;d<a;d++)w=n?n[d]:d,c.push(m.subarray(w*l,(w+1)*l));return o<t.byteLength-1&&(A=Xt(t.slice(o),l)),{pixels:c,mask:A}}}function Qt(e,t){let r=0,f="",c=0,l=0;const p=e.length;for(;r<p;)l=e[r++],c=l>>4,c<8?c=1:c===15?(c=4,l=(7&l)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++]):c===14?(c=3,l=(15&l)<<12|(63&e[r++])<<6|63&e[r++]):(c=2,l=(31&l)<<6|63&e[r++]),(l!==0||t)&&(f+=String.fromCharCode(l));return f}const qe=(()=>{const e=[];return e[254]="NEWSUBFILETYPE",e[255]="SUBFILETYPE",e[256]="IMAGEWIDTH",e[257]="IMAGELENGTH",e[258]="BITSPERSAMPLE",e[259]="COMPRESSION",e[262]="PHOTOMETRICINTERPRETATION",e[263]="THRESHHOLDING",e[264]="CELLWIDTH",e[265]="CELLLENGTH",e[266]="FILLORDER",e[269]="DOCUMENTNAME",e[270]="IMAGEDESCRIPTION",e[271]="MAKE",e[272]="MODEL",e[273]="STRIPOFFSETS",e[274]="ORIENTATION",e[277]="SAMPLESPERPIXEL",e[278]="ROWSPERSTRIP",e[279]="STRIPBYTECOUNTS",e[280]="MINSAMPLEVALUE",e[281]="MAXSAMPLEVALUE",e[282]="XRESOLUTION",e[283]="YRESOLUTION",e[284]="PLANARCONFIGURATION",e[285]="PAGENAME",e[286]="XPOSITION",e[287]="YPOSITION",e[288]="FREEOFFSETS",e[289]="FREEBYTECOUNTS",e[290]="GRAYRESPONSEUNIT",e[291]="GRAYRESPONSECURVE",e[292]="T4OPTIONS",e[293]="T6OPTIONS",e[296]="RESOLUTIONUNIT",e[297]="PAGENUMBER",e[300]="COLORRESPONSEUNIT",e[301]="TRANSFERFUNCTION",e[305]="SOFTWARE",e[306]="DATETIME",e[315]="ARTIST",e[316]="HOSTCOMPUTER",e[317]="PREDICTOR",e[318]="WHITEPOINT",e[319]="PRIMARYCHROMATICITIES",e[320]="COLORMAP",e[321]="HALFTONEHINTS",e[322]="TILEWIDTH",e[323]="TILELENGTH",e[324]="TILEOFFSETS",e[325]="TILEBYTECOUNTS",e[326]="BADFAXLINES",e[327]="CLEANFAXDATA",e[328]="CONSECUTIVEBADFAXLINES",e[330]="SUBIFD",e[332]="INKSET",e[333]="INKNAMES",e[334]="NUMBEROFINKS",e[336]="DOTRANGE",e[337]="TARGETPRINTER",e[338]="EXTRASAMPLES",e[339]="SAMPLEFORMAT",e[340]="SMINSAMPLEVALUE",e[341]="SMAXSAMPLEVALUE",e[342]="TRANSFERRANGE",e[347]="JPEGTABLES",e[512]="JPEGPROC",e[513]="JPEGIFOFFSET",e[514]="JPEGIFBYTECOUNT",e[515]="JPEGRESTARTINTERVAL",e[517]="JPEGLOSSLESSPREDICTORS",e[518]="JPEGPOINTTRANSFORM",e[519]="JPEGQTABLES",e[520]="JPEGDCTABLES",e[521]="JPEGACTABLES",e[529]="YCBCRCOEFFICIENTS",e[530]="YCBCRSUBSAMPLING",e[531]="YCBCRPOSITIONING",e[532]="REFERENCEBLACKWHITE",e[700]="XMP",e[33550]="GEOPIXELSCALE",e[33922]="GEOTIEPOINTS",e[33432]="COPYRIGHT",e[42112]="GDAL_METADATA",e[42113]="GDAL_NODATA",e[50844]="RPCCOEFFICIENT",e[34264]="GEOTRANSMATRIX",e[34735]="GEOKEYDIRECTORY",e[34736]="GEODOUBLEPARAMS",e[34737]="GEOASCIIPARAMS",e[34665]="EXIFIFD",e[34853]="GPSIFD",e[40965]="INTEROPERABILITYIFD",e})(),er=(()=>{const e=[].concat(qe);return e[36864]="ExifVersion",e[40960]="FlashpixVersion",e[40961]="ColorSpace",e[42240]="Gamma",e[37121]="ComponentsConfiguration",e[37122]="CompressedBitsPerPixel",e[40962]="PixelXDimension",e[40963]="PixelYDimension",e[37500]="MakerNote",e[37510]="UserComment",e[40964]="RelatedSoundFile",e[36867]="DateTimeOriginal",e[36868]="DateTimeDigitized",e[36880]="OffsetTime",e[36881]="OffsetTimeOriginal",e[36882]="OffsetTimeDigitized",e[37520]="SubSecTime",e[37521]="SubSecTimeOriginal",e[37522]="SubSecTimeDigitized",e[37888]="Temperature",e[37889]="Humidity",e[37890]="Pressure",e[37891]="WaterDepth",e[37892]="Acceleration",e[37893]="CameraElevationAngle",e[42016]="ImageUniqueID",e[42032]="CameraOwnerName",e[42033]="BodySerialNumber",e[42034]="LensSpecification",e[42035]="LensMake",e[42036]="LensModel",e[42037]="LensSerialNumber",e[33434]="ExposureTime",e[33437]="FNumber",e[34850]="ExposureProgram",e[34852]="SpectralSensitivity",e[34855]="PhotographicSensitivity",e[34856]="OECF",e[34864]="SensitivityType",e[34865]="StandardOutputSensitivity",e[34866]="RecommendedExposureIndex",e[34867]="ISOSpeed",e[34868]="ISOSpeedLatitudeyyy",e[34869]="ISOSpeedLatitudezzz",e[37377]="ShutterSpeedValue",e[37378]="ApertureValue",e[37379]="BrightnessValue",e[37380]="ExposureBiasValue",e[37381]="MaxApertureValue",e[37382]="SubjectDistance",e[37383]="MeteringMode",e[37384]="LightSource",e[37385]="Flash",e[37386]="FocalLength",e[37396]="SubjectArea",e[41483]="FlashEnergy",e[41484]="SpatialFrequencyResponse",e[41486]="FocalPlaneXResolution",e[41487]="FocalPlaneYResolution",e[41488]="FocalPlaneResolutionUnit",e[41492]="SubjectLocation",e[41493]="ExposureIndex",e[41495]="SensingMethod",e[41728]="FileSource",e[41729]="SceneType",e[41730]="CFAPattern",e[41985]="CustomRendered",e[41986]="ExposureMode",e[41987]="WhiteBalance",e[41988]="DigitalZoomRatio",e[41989]="FocalLengthIn35mmFilm",e[41990]="SceneCaptureType",e[41991]="GainControl",e[41992]="Contrast",e[41993]="Saturation",e[41994]="Sharpness",e[41995]="DeviceSettingDescription",e[41996]="SubjectDistanceRange",e})(),tr=["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"],rr=(()=>{const e=[];return e[1024]="GTModelTypeGeoKey",e[1025]="GTRasterTypeGeoKey",e[1026]="GTCitationGeoKey",e[2048]="GeographicTypeGeoKey",e[2049]="GeogCitationGeoKey",e[2050]="GeogGeodeticDatumGeoKey",e[2051]="GeogPrimeMeridianGeoKey",e[2052]="GeogLinearUnitsGeoKey",e[2053]="GeogLinearUnitSizeGeoKey",e[2054]="GeogAngularUnitsGeoKey",e[2055]="GeogAngularUnitSizeGeoKey",e[2056]="GeogEllipsoidGeoKey",e[2057]="GeogSemiMajorAxisGeoKey",e[2058]="GeogSemiMinorAxisGeoKey",e[2059]="GeogInvFlatteningGeoKey",e[2061]="GeogPrimeMeridianLongGeoKey",e[2060]="GeogAzimuthUnitsGeoKey",e[3072]="ProjectedCSTypeGeoKey",e[3073]="PCSCitationGeoKey",e[3074]="ProjectionGeoKey",e[3075]="ProjCoordTransGeoKey",e[3076]="ProjLinearUnitsGeoKey",e[3077]="ProjLinearUnitSizeGeoKey",e[3078]="ProjStdParallel1GeoKey",e[3079]="ProjStdParallel2GeoKey",e[3080]="ProjNatOriginLongGeoKey",e[3081]="ProjNatOriginLatGeoKey",e[3082]="ProjFalseEastingGeoKey",e[3083]="ProjFalseNorthingGeoKey",e[3084]="ProjFalseOriginLongGeoKey",e[3085]="ProjFalseOriginLatGeoKey",e[3086]="ProjFalseOriginEastingGeoKey",e[3087]="ProjFalseOriginNorthingGeoKey",e[3088]="ProjCenterLongGeoKey",e[3090]="ProjCenterEastingGeoKey",e[3091]="ProjCenterNorthingGeoKey",e[3092]="ProjScaleAtNatOriginGeoKey",e[3093]="ProjScaleAtCenterGeoKey",e[3094]="ProjAzimuthAngleGeoKey",e[3095]="ProjStraightVertPoleLongGeoKey",e[4096]="VerticalCSTypeGeoKey",e[4097]="VerticalCitationGeoKey",e[4098]="VerticalDatumGeoKey",e[4099]="VerticalUnitsGeoKey",e})(),nr=function(e,t){let r=(t||qe)[e];return r===void 0&&(r="unknown"+String(e)),r},$e=new Map;$e.set("EXIFIFD",er),$e.set("GPSIFD",tr);const Ie={TIFF_TAGS:qe,ifdTags:$e,GEO_KEYS:rr,getTagName:nr},Ye=(()=>{const e=new ArrayBuffer(4),t=new Uint8Array(e);return new Uint32Array(e)[0]=1,t[0]===1})(),mt=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],Ee=4294967296,ir=new Set([1,5,6,7,8,34712,34887]);function Et(e,t){let r="unknown";return e===3?r="f32":e===1?t===1?r="u1":t===2?r="u2":t===4?r="u4":t<=8?r="u8":t<=16?r="u16":t<=32&&(r="u32"):e===2&&(t<=8?r="s8":t<=16?r="s16":t<=32&&(r="s32")),r}function Ge(e){let t=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;default:t=Float32Array}return t}function ar(e,t){return{x:t[0]*e.x+t[1]*e.y+t[2],y:t[3]*e.x+t[4]*e.y+t[5]}}function xt(e,t){var r;return(r=e.get(t))==null?void 0:r.values}function we(e,t){var r;return(r=e.get(t))==null?void 0:r.values}function Ve(e,t){var r;return(r=e.get(t))==null?void 0:r.values[0]}function W(e,t){var r;return(r=e.get(t))==null?void 0:r.values[0]}function _e(e,t,r,f=0,c=Ie.TIFF_TAGS,l=4){const p=l===8,n=p?Ze(new DataView(e,r,8),0,t):new DataView(e,r,2).getUint16(0,t),u=4+2*l,a=p?8:2,o=a+n*u;if(r+o>e.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:o};const m=r+o+4<=e.byteLength?Oe(new DataView(e,r+o,l===8?8:4),0,t,l===8):null,d=r+a,v=new Map;let A,g,w,i,h,S,b;for(let s=0;s<n;s++){g=new DataView(e,d+u*s,u),w=g.getUint16(0,t),h=g.getUint16(2,t),i=Ie.getTagName(w,c);const T=[];l===2?(S=g.getUint16(4,t),b=g.getUint16(6,t)):l===4?(S=g.getUint32(4,t),b=g.getUint32(8,t)):l===8&&(S=Oe(g,4,t,!0),b=Oe(g,12,t,!0),T.push(g.getUint32(12,t)),T.push(g.getUint32(16,t))),A={id:w,type:h,valueCount:S,valueOffset:b,valueOffsets:T,values:null},hr(e,t,A,f,!1,l),v.set(i,A)}return{success:!0,ifd:v,nextIFD:m,requiredBufferSize:o}}const sr=function(e,t){return At(e,{inputOffset:t}).pixels[0]};async function je(e,t,r,f,c){var l,p;const n=Ye===t,u=W(r,"BITSPERSAMPLE"),a=Et((l=W(r,"SAMPLEFORMAT"))!=null?l:1,u),o=(p=W(r,"COMPRESSION"))!=null?p:1,m=Ge(a);let d,v,A,g,w,i,h;if(o===34887)return await Tt(),sr(e,f);if(o===1)A=e.slice(f,f+c),g=new Uint8Array(A);else if(o===8||o===32946)g=new Uint8Array(e,f,c),i=new be(g),h=i.getBytes(),A=new ArrayBuffer(h.length),g=new Uint8Array(A),g.set(h);else if(o===6){g=new Uint8Array(e,f,c);const S=new Re;S.parse(g);const b=S.getData(S.width,S.height,!0);A=new ArrayBuffer(b.length),g=new Uint8Array(A),g.set(b)}else if(o===7){const S=r.get("JPEGTABLES").values,b=S.length-2;g=new Uint8Array(b+c-2);for(let E=0;E<b;E++)g[E]=S[E];const s=new Uint8Array(e,f+2,c-2);for(let E=0;E<s.length;E++)g[b+E]=s[E];const T=new Re;T.parse(g);const y=T.getData(T.width,T.height,!0);A=new ArrayBuffer(y.length),g=new Uint8Array(A),g.set(y)}else o===5&&(g=Je(e,f,c,t),A=g.buffer);if(a==="u8"||a==="s8"||n)v=new m(A);else{switch(A=new ArrayBuffer(g.length),w=new Uint8Array(A),a){case"u16":case"s16":for(d=0;d<g.length;d+=2)w[d]=g[d+1],w[d+1]=g[d];break;case"u32":case"s32":case"f32":for(d=0;d<g.length;d+=4)w[d]=g[d+3],w[d+1]=g[d+2],w[d+2]=g[d+1],w[d+3]=g[d]}v=new m(A)}return v}async function or(e,t,r){var f;const c=we(r,"TILEOFFSETS");if(c===void 0)return null;const l=we(r,"TILEBYTECOUNTS"),{width:p,height:n,pixelType:u,tileWidth:a,tileHeight:o}=He([r]),m=Xe(r,t),d=t.planes,v=p*n,A=W(r,"BITSPERSAMPLE"),g=((f=W(r,"COMPRESSION"))!=null?f:1)===34887,w=Ge(u),i=[];for(let D=0;D<d;D++)i.push(new w(v));let h,S,b,s,T,y,E,I,k,C,L,x,P;const R=Math.ceil(p/a);if(A%8==0)if(g&&m&&d>1){const D=Math.round(c.length/d);for(h=0;h<D;h++){y=Math.floor(h/R)*o,E=h%R*a,I=y*p+E;for(let O=0;O<d;O++){const V=h*d+O;for(b=await je(e,t.littleEndian,r,c[V],l[V]),C=0,k=I,x=Math.min(a,p-E),L=Math.min(o,n-y),P=i[O],s=0;s<L;s++)for(k=I+s*p,C=s*a,T=0;T<x;T++,k++,C++)P[k]=b[C]}}}else for(h=0;h<c.length;h++)for(y=Math.floor(h/R)*o,E=h%R*a,I=y*p+E,b=await je(e,t.littleEndian,r,c[h],l[h]),C=0,k=I,x=Math.min(a,p-E),L=Math.min(o,n-y),S=0;S<d;S++)if(P=i[S],m||g)for(s=0;s<L;s++)for(k=I+s*p,C=a*o*S+s*a,T=0;T<x;T++,k++,C++)P[k]=b[C];else for(s=0;s<L;s++)for(k=I+s*p,C=s*a*d+S,T=0;T<x;T++,k++,C+=d)P[k]=b[C];return{width:p,height:n,pixelType:u,pixels:i}}const lr=function(e,t,r){var f;const c=Ye===t.littleEndian,l=we(r,"STRIPOFFSETS");if(l===void 0)return null;const{width:p,height:n,pixelType:u}=He([r]),a=t.planes,o=p*n,m=W(r,"BITSPERSAMPLE"),d=Ge(u),v=new d(o*a),A=we(r,"STRIPBYTECOUNTS"),g=W(r,"ROWSPERSTRIP"),w=(f=W(r,"COMPRESSION"))!=null?f:1;let i,h,S,b,s,T,y,E,I,k,C,L=g;if(m%8==0)for(i=0;i<l.length;i++){if(s=i*(g*p)*a,L=(i+1)*g>n?n-i*g:g,u==="u8"||u==="s8"||c){if(w===8||w===32946)y=new Uint8Array(e,l[i],A[i]),k=new be(y),C=k.getBytes(),T=new ArrayBuffer(C.length),y=new Uint8Array(T),y.set(C),y.length!==L*p*a*m/8&&console.log("strip byte counts is different than expected");else if(w===6){y=new Uint8Array(e,l[i],A[i]);const P=new Re;P.parse(y);const R=P.getData(P.width,P.height,!0);T=new ArrayBuffer(R.length),y=new Uint8Array(T),y.set(R)}else w===5?(y=Je(e,l[i],A[i],t.littleEndian),T=y.buffer):w===1&&(A[i]!==L*p*a*m/8&&console.log("strip byte counts is different than expected"),T=e.slice(l[i],l[i]+A[i]));b=new d(T)}else{switch(w===6||w===8||w===32946?(y=new Uint8Array(e,l[i],A[i]),k=new be(y),y=k.getBytes(),T=new ArrayBuffer(y.length),E=new Uint8Array(T),y.length!==L*p*a*m/8&&console.log("strip byte counts is different than expected")):w===1&&(A[i]!==L*p*a*m/8&&console.log("strip byte counts is different than expected"),T=new ArrayBuffer(A[i]),y=new Uint8Array(e,l[i],A[i]),E=new Uint8Array(T)),u){case"u16":case"s16":for(S=0;S<y.length;S+=2)E[S]=y[S+1],E[S+1]=y[S];break;case"u32":case"s32":case"f32":for(S=0;S<y.length;S+=4)E[S]=y[S+3],E[S+1]=y[S+2],E[S+2]=y[S+1],E[S+3]=y[S]}b=new d(T)}v.set(b,s)}const x=[];if(a===1)x.push(v);else for(i=0;i<a;i++){for(I=new d(o),h=0;h<o;h++)I[h]=v[h*a+i];x.push(I)}return{width:p,height:n,pixelType:u,pixels:x}},cr=function(e,t,r){if(!(e&&e.length>0&&t&&r))return null;let f,c,l;const p=e[0].length,n=e.length,u=new Uint8Array(p);for(let a=0;a<n;a++)if(f=e[a],c=t[a],l=r[a],a===0)for(let o=0;o<p;o++)u[o]=f[o]<c||f[o]>l?0:1;else for(let o=0;o<p;o++)u[o]&&(u[o]=f[o]<c||f[o]>l?0:1);return u},ur=function(e){if(!e)return null;const t=e.match(/<Item(.*?)Item>/gi);if(!t||t.length===0)return null;const r=new Map;let f,c,l,p,n;for(let i=0;i<t.length;i++)f=t[i],c=f.slice(6,f.indexOf(">")),p=f.indexOf("sample="),p>-1&&(n=f.slice(p+8,f.indexOf('"',p+8))),p=f.indexOf("name="),p>-1&&(c=f.slice(p+6,f.indexOf('"',p+6))),c&&(l=f.slice(f.indexOf(">")+1,f.indexOf("</Item>")).trim(),n!=null?r.has(c)?r.get(c)[n]=l:r.set(c,[l]):r.set(c,l)),n=null;const u=r.get("STATISTICS_MINIMUM"),a=r.get("STATISTICS_MAXIMUM"),o=r.get("STATISTICS_MEAN"),m=r.get("STATISTICS_STDDEV");let d=null;if(u&&a){d=[];for(let i=0;i<u.length;i++)d.push({min:parseFloat(u[i]),max:parseFloat(a[i]),avg:o&&parseFloat(o[i]),stddev:m&&parseFloat(m[i])})}const v=r.get("BandName"),A=r.get("WavelengthMin"),g=r.get("WavelengthMax");let w=null;if(v){w=[];for(let i=0;i<v.length;i++)w.push({BandName:v[i],WavelengthMin:A&&parseFloat(A[i]),WavelengthMax:g&&parseFloat(g[i])})}return{statistics:d,bandProperties:w,dataType:r.get("DataType"),rawMetadata:r}};function hr(e,t,r,f=0,c=!1,l=4){if(r.values)return!0;const p=r.type,n=r.valueCount;let u=r.valueOffset,a=[];const o=mt[p],m=8*o,d=n*o,v=n*mt[p]*8;let A,g;const w=l===8?64:32,i=r.valueOffsets;if(v>w&&d>(c?e.byteLength:e?e.byteLength-u+f:0))return r.offlineOffsetSize=[u,d],r.values=null,!1;if(v<=w){if(!t)if(w<=32)u>>>=32-v;else{const h=i!=null&&i.length?i[0]:u>>>0,S=i!=null&&i.length?i[1]:Math.round((u-h)/Ee);v<=32?(u=h>>>32-v,i[0]=u):(u=h*2**(32-v)+(S>>>32-v),i[0]=h,i[1]=S>>>32-v)}if(n===1&&m===w)a=[u];else if(w===64){const h=i!=null&&i.length?i[0]:u>>>0,S=i!=null&&i.length?i[1]:Math.round((u-h)/Ee);let b=h,s=32;for(g=1;g<=n;g++){const T=32-m*g%32;if(s<m){const y=b<<T>>>32-s,E=S<<32-s>>>32-s;b=S,a.push(y+E*2**(m-s)),s-=32-(m-s)}else a.push(b<<T>>>32-m),s-=m;s===0&&(s=32,b=S)}}else for(g=1;g<=n;g++){const h=32-m*g;a.push(u<<h>>>32-m)}}else{u-=f,c&&(u=0);for(let h=u;h<u+d;h+=o){switch(p){case 1:case 2:case 7:A=new DataView(e,h,1).getUint8(0);break;case 3:A=new DataView(e,h,2).getUint16(0,t);break;case 4:case 13:A=new DataView(e,h,4).getUint32(0,t);break;case 5:A=new DataView(e,h,4).getUint32(0,t)/new DataView(e,h+4,4).getUint32(0,t);break;case 6:A=new DataView(e,h,1).getInt8(0);break;case 8:A=new DataView(e,h,2).getInt16(0,t);break;case 9:A=new DataView(e,h,4).getInt32(0,t);break;case 10:A=new DataView(e,h,4).getInt32(0,t)/new DataView(e,h+4,4).getInt32(0,t);break;case 11:A=new DataView(e,h,4).getFloat32(0,t);break;case 12:A=new DataView(e,h,8).getFloat64(0,t);break;case 16:case 18:A=Ze(new DataView(e,h,8),0,t);break;case 17:A=dr(new DataView(e,h,8),0,t);break;default:A=null}a.push(A)}}if(p===2){let h="";const S=a;for(a=[],g=0;g<S.length;g++)S[g]===0&&h!==""?(a.push(h),h=""):h+=String.fromCharCode(S[g]);h===""&&a.length!==0||a.push(h)}return r.values=a,!0}function He(e){var t,r;const f=e[0],c=W(f,"TILEWIDTH"),l=W(f,"TILELENGTH"),p=W(f,"IMAGEWIDTH"),n=W(f,"IMAGELENGTH"),u=W(f,"BITSPERSAMPLE"),a=W(f,"SAMPLESPERPIXEL"),o=(t=W(f,"SAMPLEFORMAT"))!=null?t:1,m=Et(o,u),d=Xe(f),v=xt(f,"GDAL_NODATA");let A;v!=null&&v.length&&(A=v.map(U=>parseFloat(U)),A.some(U=>isNaN(U))&&(A=null));const g=(r=W(f,"COMPRESSION"))!=null?r:1;let w;switch(g){case 1:w="NONE";break;case 2:case 3:case 4:case 32771:w="CCITT";break;case 5:w="LZW";break;case 6:case 7:w="JPEG";break;case 32773:w="PACKBITS";break;case 8:case 32946:w="DEFLATE";break;case 34712:w="JPEG2000";break;case 34887:w="LERC";break;default:w=String(g)}let i=!0,h="";ir.has(g)||(i=!1,h+="unsupported tag compression "+g),o>3&&(i=!1,h+="unsupported tag sampleFormat "+o),u%8!=0&&(i=!1,h+="unsupported tag bitsPerSample "+u);const S=Ve(f,"GEOASCIIPARAMS");let b;if(S){const U=S.split("|").find(N=>N.indexOf("ESRI PE String = ")>-1),G=U?U.replace("ESRI PE String = ",""):"";b=G.startsWith("COMPD_CS")||G.startsWith("PROJCS")||G.startsWith("GEOGCS")?{wkid:null,wkt:G}:null}const s=we(f,"GEOTIEPOINTS"),T=we(f,"GEOPIXELSCALE"),y=we(f,"GEOTRANSMATRIX"),E=f.has("GEOKEYDIRECTORY")?f.get("GEOKEYDIRECTORY").data:null;let I,k,C=!1;if(E){C=W(E,"GTRasterTypeGeoKey")===2;const U=W(E,"GTModelTypeGeoKey");if(U===2){const G=W(E,"GeographicTypeGeoKey");G>=1024&&G<=32766&&(b={wkid:G})}else if(U===1){const G=W(E,"ProjectedCSTypeGeoKey");G>=1024&&G<=32766&&(b={wkid:G})}}if(T&&s&&s.length>=6?(I=[T[0],0,s[3]-s[0]*T[0],0,-Math.abs(T[1]),s[4]-s[1]*T[1]],C&&(I[2]-=.5*I[0]+.5*I[1],I[5]-=.5*I[3]+.5*I[4])):y&&y.length===16&&(I=C?[y[0],y[1],y[3]-.5*y[0],y[4],y[5],y[7]-.5*y[5]]:[y[0],y[1],y[3],y[4],y[5],y[7]]),I){const U=[{x:0,y:n},{x:0,y:0},{x:p,y:n},{x:p,y:0}];let G,N=Number.POSITIVE_INFINITY,F=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY,Y=Number.NEGATIVE_INFINITY;for(let H=0;H<U.length;H++)G=ar(U[H],I),N=G.x>N?N:G.x,B=G.x<B?B:G.x,F=G.y>F?F:G.y,Y=G.y<Y?Y:G.y;k={xmin:N,xmax:B,ymin:F,ymax:Y,spatialReference:b}}else k={xmin:-.5,ymin:.5-n,xmax:p-.5,ymax:.5,spatialReference:b};const L=e.filter(U=>Ve(U,"NEWSUBFILETYPE")===1);let x,P,R,D,O;if(L.length>0){x=Math.round(Math.log(p/W(L[0],"IMAGEWIDTH"))/Math.LN2);const U=L[L.length-1];P=Math.round(Math.log(p/W(U,"IMAGEWIDTH"))/Math.LN2),R=W(U,"TILEWIDTH"),D=W(U,"TILELENGTH")}R=P>0?R||c:null,D=P>0?D||l:null,c&&(O=[{maxCol:Math.ceil(p/c)-1,maxRow:Math.ceil(n/l)-1,minRow:0,minCol:0}],L.forEach(U=>{O.push({maxCol:Math.ceil(W(U,"IMAGEWIDTH")/W(U,"TILEWIDTH"))-1,maxRow:Math.ceil(W(U,"IMAGELENGTH")/W(U,"TILELENGTH"))-1,minRow:0,minCol:0})}));const V=Ve(e[0],"GDAL_METADATA"),_=ur(V);return h+=" "+kt({width:p,height:n,tileWidth:c,tileHeight:l,planes:a,ifds:e}),{width:p,height:n,tileWidth:c,tileHeight:l,planes:a,isBSQ:d,pixelType:m,compression:w,noData:A,isSupported:i,message:h,extent:k,affine:T?null:I,firstPyramidLevel:x,maximumPyramidLevel:P,pyramidBlockWidth:R,pyramidBlockHeight:D,tileBoundary:O,metadata:_}}function Xe(e,t){const r=xt(e,"PLANARCONFIGURATION");return r?r[0]===2:!!t&&t.isBSQ}function fr(e){const{littleEndian:t,isBigTiff:r,firstIFD:f}=pr(e);let c=f;const l=[];do{const p=mr(e,t,c,0,Ie.TIFF_TAGS,r?8:4);if(!p.success)break;l.push(p.ifd),c=p.nextIFD}while(c>0);return he(ie({},He(l)),{littleEndian:t,isBigTiff:r,ifds:l})}function Ze(e,t,r){const f=e.getUint32(t,r),c=e.getUint32(t+4,r);return r?c*Ee+f:f*Ee+c}function dr(e,t,r){let f=r?e.getInt32(t,r):e.getUint32(t,r),c=r?e.getUint32(t+4,r):e.getInt32(t+4,r);const l=(r?f:c)>=0?1:-1;return r?f*=l:c*=l,l*(r?c*Ee+f:f*Ee+c)}function Oe(e,t,r,f){return f?Ze(e,t,r):e.getUint32(t,r)}function pr(e){const t=new DataView(e,0,16),r=t.getUint16(0,!1);let f=null;if(r===18761)f=!0;else{if(r!==19789)throw"unexpected endianess byte";f=!1}const c=t.getUint16(2,f);if(c!==42&&c!==43)throw"unexpected tiff identifier";let l=4;const p=c===43;if(p){const n=t.getUint16(l,f);if(l+=2,n!==8||t.getUint16(l,f)!==0)throw"unsupported bigtiff version";l+=2}return{littleEndian:f,isBigTiff:p,firstIFD:Oe(t,l,f,p)}}function mr(e,t,r,f=0,c=Ie.TIFF_TAGS,l=4){const p=_e(e,t,r,f,c,l);let n;const u=p.ifd;if(u){if(Ie.ifdTags.forEach((a,o)=>{u.has(o)&&(n=u.get(o),n.data=_e(e,t,n.valueOffset-f,f,a).ifd)}),u.has("GEOKEYDIRECTORY")){n=u.get("GEOKEYDIRECTORY");const a=n.values;if(a&&a.length>4){const o=a[0]+"."+a[1]+"."+a[2];n.data=_e(e,t,n.valueOffset+6-f,f,Ie.GEO_KEYS,2).ifd,n.data&&n.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[o]})}}if(u.has("XMP")){n=u.get("XMP");const a=n.values;typeof a[0]=="number"&&n.type===7&&(n.values=[Qt(new Uint8Array(a))])}}return p}function kt(e){const{width:t,height:r,tileHeight:f,tileWidth:c}=e,l=e.planes,p=c?c*f:t*r,n=W(e.ifds[0],"BITSPERSAMPLE");let u="";return p*l>2**30/(n>8?n/8:1)&&(u=c?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),u}async function gr(e,t){var r;const{headerInfo:f,ifd:c,offsets:l,sizes:p}=t,n=[];for(let k=0;k<l.length;k++){const C=await je(e,f.littleEndian,c,l[k],p[k]||e.byteLength);n.push(C)}const u=Xe(c,f),{pixelType:a,planes:o}=f,m=Ge(a),d=W(c,"TILEWIDTH"),v=W(c,"TILELENGTH"),A=(r=W(c,"COMPRESSION"))!=null?r:1,g=d*v;let w;const i=[];let h=n[0];const S=A===34887;for(let k=0;k<o;k++){if(w=new m(g),u&&S){h=n[k];for(let C=0;C<g;C++)w[C]=h[k][C+k]}else if(u||S&&!u)w=h.slice(g*k,g*(k+1));else for(let C=0;C<g;C++)w[C]=h[C*o+k];i.push(w)}const b=f.noData?f.noData[0]:null,s=f.metadata?f.metadata.statistics:null,T=s?s.map(k=>k.min):null,y=s?s.map(k=>k.max):null;let E,I;if(b!=null)if(E=new Uint8Array(g),Math.abs(b)>1e24)for(I=0;I<g;I++)Math.abs((i[0][I]-b)/b)<1e-6?E[I]=0:E[I]=1;else for(I=0;I<g;I++)i[0][I]===b?E[I]=0:E[I]=1;else T&&y&&t.applyMinMaxConstraint&&(E=cr(i,T,y));return{pixelType:a,width:d,height:v,pixels:i,mask:E,noDataValue:b}}async function yr(e,t=0,r){r=r||fr(e);const{ifds:f,noData:c}=r;if(f.length===0)throw"no valid image file directory";const l=kt(r);if(l)throw l;let p,n;const u=t===-1?f[f.length-1]:f[t],a=c?c[0]:null;if(n=r.tileWidth?await or(e,r,u):await lr(e,r,u),a!==null){if(n.mask=new Uint8Array(n.width*n.height),Math.abs(a)>1e24)for(p=0;p<n.width*n.height;p++)Math.abs((n.pixels[0][p]-a)/a)<1e-6?n.mask[p]=0:n.mask[p]=1;else for(p=0;p<n.width*n.height;p++)n.pixels[0][p]===a?n.mask[p]=0:n.mask[p]=1;n.noDataValue=a}return n}var wr=function(e){var t,r,f,c,l,p;function n(u){var a,o,m,d,v,A,g,w,i,h,S,b,s;for(this.data=u,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},v=null;;){switch(a=this.readUInt32(),w=function(){var T,y;for(y=[],T=0;T<4;++T)y.push(String.fromCharCode(this.data[this.pos++]));return y}.call(this).join(""),w){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":v&&this.animation.frames.push(v),this.pos+=4,v={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),m=this.readUInt16()||100,v.delay=1e3*d/m,v.disposeOp=this.data[this.pos++],v.blendOp=this.data[this.pos++],v.data=[];break;case"IDAT":case"fdAT":for(w==="fdAT"&&(this.pos+=4,a-=4),u=(v!=null?v.data:void 0)||this.imgData,S=0;0<=a?S<a:S>a;0<=a?++S:--S)u.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(a),(i=255-this.transparency.indexed.length)>0)for(b=0;0<=i?b<i:b>i;0<=i?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":A=(h=this.read(a)).indexOf(0),g=String.fromCharCode.apply(String,h.slice(0,A)),this.text[g]=String.fromCharCode.apply(String,h.slice(A+1));break;case"IEND":return v&&this.animation.frames.push(v),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(s=this.colorType)===4||s===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return n.load=function(u,a,o){var m;return typeof a=="function"&&(o=a),(m=new XMLHttpRequest).open("GET",u,!0),m.responseType="arraybuffer",m.onload=function(){var d;return d=new n(new Uint8Array(m.response||m.mozResponseArrayBuffer)),typeof(a!=null?a.getContext:void 0)=="function"&&d.render(a),typeof o=="function"?o(d):void 0},m.send(null)},r=1,f=2,t=0,n.prototype.read=function(u){var a,o;for(o=[],a=0;0<=u?a<u:a>u;0<=u?++a:--a)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(u){var a,o,m,d,v,A,g,w,i,h,S,b,s,T,y,E,I,k,C,L,x,P,R;if(u==null&&(u=this.imgData),u.length===0)return new Uint8Array(0);for(u=(u=new be(u)).getBytes(),E=(b=this.pixelBitlength/8)*this.width,s=new Uint8Array(E*this.height),A=u.length,y=0,T=0,o=0;T<A;){switch(u[T++]){case 0:for(d=C=0;C<E;d=C+=1)s[o++]=u[T++];break;case 1:for(d=L=0;L<E;d=L+=1)a=u[T++],v=d<b?0:s[o-b],s[o++]=(a+v)%256;break;case 2:for(d=x=0;x<E;d=x+=1)a=u[T++],m=(d-d%b)/b,I=y&&s[(y-1)*E+m*b+d%b],s[o++]=(I+a)%256;break;case 3:for(d=P=0;P<E;d=P+=1)a=u[T++],m=(d-d%b)/b,v=d<b?0:s[o-b],I=y&&s[(y-1)*E+m*b+d%b],s[o++]=(a+Math.floor((v+I)/2))%256;break;case 4:for(d=R=0;R<E;d=R+=1)a=u[T++],m=(d-d%b)/b,v=d<b?0:s[o-b],y===0?I=k=0:(I=s[(y-1)*E+m*b+d%b],k=m&&s[(y-1)*E+(m-1)*b+d%b]),g=v+I-k,w=Math.abs(g-v),h=Math.abs(g-I),S=Math.abs(g-k),i=w<=h&&w<=S?v:h<=S?I:k,s[o++]=(a+i)%256;break;default:throw new Error("Invalid filter algorithm: "+u[T-1])}y++}return s},n.prototype.decodePalette=function(){var u,a,o,m,d,v,A,g,w;for(o=this.palette,v=this.transparency.indexed||[],d=new Uint8Array((v.length||0)+o.length),m=0,u=0,a=A=0,g=o.length;A<g;a=A+=3)d[m++]=o[a],d[m++]=o[a+1],d[m++]=o[a+2],d[m++]=(w=v[u++])!=null?w:255;return d},n.prototype.copyToImageData=function(u,a){var o,m,d,v,A,g,w,i,h,S,b;if(m=this.colors,h=null,o=this.hasAlphaChannel,this.palette.length&&(h=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),m=4,o=!0),i=(d=u.data||u).length,A=h||a,v=g=0,m===1)for(;v<i;)w=h?4*a[v/4]:g,S=A[w++],d[v++]=S,d[v++]=S,d[v++]=S,d[v++]=o?A[w++]:this.transparency.grayscale&&this.transparency.grayscale===S?0:255,g=w;else for(;v<i;)w=h?4*a[v/4]:g,d[v++]=A[w++],d[v++]=A[w++],d[v++]=A[w++],d[v++]=o?A[w++]:this.transparency.rgb&&this.transparency.rgb[1]===A[w-3]&&this.transparency.rgb[3]===A[w-2]&&this.transparency.rgb[5]===A[w-1]?0:255,g=w},n.prototype.decode=function(){var u;return u=new Uint8Array(this.width*this.height*4),this.copyToImageData(u,this.decodePixels()),u},l=e.document&&e.document.createElement("canvas"),p=l&&l.getContext("2d"),c=function(u){var a;return p.width=u.width,p.height=u.height,p.clearRect(0,0,u.width,u.height),p.putImageData(u,0,0),(a=new Image).src=l.toDataURL(),a},n.prototype.decodeFrames=function(u){var a,o,m,d,v,A,g,w;if(this.animation){for(w=[],o=v=0,A=(g=this.animation.frames).length;v<A;o=++v)a=g[o],m=u.createImageData(a.width,a.height),d=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(m,d),a.imageData=m,w.push(a.image=c(m));return w}},n.prototype.renderFrame=function(u,a){var o,m,d;return o=(m=this.animation.frames)[a],d=m[a-1],a===0&&u.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===r?u.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===f&&u.putImageData(d.imageData,d.xOffset,d.yOffset),o.blendOp===t&&u.clearRect(o.xOffset,o.yOffset,o.width,o.height),u.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(u){var a,o,m,d,v,A,g=this;return o=0,A=this.animation,d=A.numFrames,m=A.frames,v=A.numPlays,(a=function(){var w,i;if(w=o++%d,i=m[w],g.renderFrame(u,w),d>1&&o/d<v)return g.animation._timeout=setTimeout(a,i.delay)})()},n.prototype.stopAnimation=function(){var u;return clearTimeout((u=this.animation)!=null?u._timeout:void 0)},n.prototype.render=function(u){var a,o;return u._png&&u._png.stopAnimation(),u._png=this,u.width=this.width,u.height=this.height,a=u.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},n}(self);const br=new Set(["jpg","png","bmp","gif"]),Sr=new Set(["S8","U8","S16","U16","S32","U32","F32","F64"]);async function vr(e,t){var r;if(!Ye)throw new fe("rasterCoded:decode","lerc decoder is not supported on big endian platform");await Tt();const{offset:f,noDataValue:c}=t;let l=(r=t.pixelType)==null?void 0:r.toUpperCase();l&&!Sr.has(l)&&(l=null);const{width:p,height:n,pixelType:u,statistics:a,pixels:o,mask:m}=At(e,{inputOffset:f,noDataValue:c,pixelType:l});return new oe({width:p,height:n,pixelType:u.toLowerCase(),pixels:o,mask:m,statistics:a})}async function Tr(e,t){const r=await yr(e,t.pyramidLevel||0),f=new oe({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,statistics:null});return f.updateStatistics(),f}async function Ar(e,t){const r=await gr(e,t.customOptions),f=new oe({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,statistics:null});return f.updateStatistics(),f}function Ct(e,t){const r=t.pixelType||"u8",f=oe.getPixelArrayConstructor(r),c=r==="u8"?e:new f(e.buffer),l=[],p=t.planes||1;if(p===1)l.push(c);else for(let u=0;u<p;u++){const a=(t.width||1)*(t.height||e.length),o=new f(a);for(let m=0;m<a;m++)o[m]=c[m*p+u];l.push(o)}const n=new oe({width:t.width||1,height:t.height||e.length,pixels:l,pixelType:r,statistics:null});return n.updateStatistics(),n}function Ir(e,t){return Ct(new be(new Uint8Array(e)).getBytes(),t)}function Er(e,t){return Ct(Je(e,t.offset,t.eof,!t.isInputBigEndian),t)}function xr(e,t,r){const{pixelTypeCtor:f}=Or(t.pixelType),c=(0,Zt.decode)(e,{width:t.width,height:t.height,pixelType:f,format:r}),l=new oe({width:t.width,height:t.height,pixels:c.pixels,pixelType:t.pixelType,mask:c.mask,statistics:null});return l.updateStatistics(),l}function kr(e){const t=zt.decode(e),r=new oe({width:t.width,height:t.height,pixels:t.pixels,pixelType:"U8",mask:t.mask,statistics:null});return r.updateStatistics(),r}function Cr(e,t){const r=new Uint8Array(e),f=new wr(r),{width:c,height:l}=t,p=c*l,n=f.decode();let u,a=0,o=0;const m=new Uint8Array(p);for(a=0;a<p;a++)m[a]=n[4*a+3];const d=new oe({width:c,height:l,pixels:[],pixelType:"U8",mask:m,statistics:[]});for(a=0;a<3;a++){for(u=new Uint8Array(p),o=0;o<p;o++)u[o]=n[4*o+a];d.addData({pixels:u})}return d.updateStatistics(),d}async function Pr(e,t,r,f){const c=new ze,l=ie({applyJpegMask:!1,format:t},r),p=await c.decode(e,l,f),n=new oe(p);return n.updateStatistics(),n}function Pt(e){if(e==null)throw new fe("rasterCodec:decode","parameter encodeddata is required.");const t=new Uint8Array(e,0,10);let r="";return t[0]===255&&t[1]===216?r="jpg":t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71?r="png":t[0]===67&&t[1]===110&&t[2]===116&&t[3]===90&&t[4]===73&&t[5]===109&&t[6]===97&&t[7]===103&&t[8]===101&&t[9]===32?r="lerc":t[0]===76&&t[1]===101&&t[2]===114&&t[3]===99&&t[4]===50&&t[5]===32?r="lerc2":t[0]===73&&t[1]===73&&t[2]===42&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===42||t[0]===73&&t[1]===73&&t[2]===43&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===43?r="tiff":t[0]===71&&t[1]===73&&t[2]===70?r="gif":t[0]===66&&t[1]===77?r="bmp":String.fromCharCode.apply(null,t).toLowerCase().indexOf("error")>-1&&(r="error"),r}function Lr(e){let t=null;switch(e){case"lerc":case"lerc2":t=vr;break;case"jpg":t=kr;break;case"png":t=Cr;break;case"bsq":case"bip":t=(r,f)=>xr(r,f,e);break;case"tiff":t=Tr;break;case"deflate":t=Ir;break;case"lzw":t=Er;break;case"error":t=()=>{throw new fe("rasterCodec:decode","input data contains error")};break;default:t=()=>{throw new fe("rasterCodec:decode","unsupported raster format")}}return t}function Or(e){let t=null,r=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":r=255,t=Uint8Array;break;case"u16":r=r||65535,t=Uint16Array;break;case"u32":r=r||2**32-1,t=Uint32Array;break;case"s8":r=r||-128,t=Int8Array;break;case"s16":r=r||-32768,t=Int16Array;break;case"s32":r=r||0-2**31,t=Int32Array;break;default:t=Float32Array}return{pixelTypeCtor:t,noDataValue:r}}function Ur(e,t=1){if(!e)return;const{pixels:r,width:f,height:c,mask:l}=e;if(!r||r.length===0)return;const p=r.length,n=f-1,u=c-1,a=[];let o,m,d,v,A,g,w;const i=oe.getPixelArrayConstructor(e.pixelType);if(t===0){for(o=0;o<p;o++){for(A=r[o],g=new i(n*u),m=0;m<u;m++)for(v=m*f,d=0;d<n;d++)g[m*n+d]=A[v+d];a.push(g)}if(l)for(w=new Uint8Array(n*u),m=0;m<u;m++)for(v=m*f,d=0;d<n;d++)w[m*n+d]=l[v+d]}else{for(o=0;o<p;o++){for(A=r[o],g=new i(n*u),m=0;m<u;m++)for(v=m*f,d=0;d<n;d++)g[m*n+d]=(A[v+d]+A[v+d+1]+A[v+f+d]+A[v+f+d+1])/4;a.push(g)}if(l)for(w=new Uint8Array(n*u),m=0;m<u;m++)for(v=m*f,d=0;d<n;d++)w[m*n+d]=Math.min.apply(null,[l[v+d],l[v+d+1],l[v+f+d],l[v+f+d+1]])}e.width=n,e.height=u,e.mask=w,e.pixels=a}function $r(e){let t=Pt(e);return t==="lerc2"?t="lerc":t==="error"&&(t=""),t}async function jr(e,t={},r){if(e==null)throw new fe("rasterCodec:decode","missing encodeddata parameter.");let f,c,l=t.format&&t.format.toLowerCase();if(!(l!=="bsq"&&l!=="bip"||t.width!=null&&t.height!=null))throw new fe("rasterCodec:decode","requires width and height in options parameter.");return l==="tiff"&&t.customOptions?Ar(e,t):((!l||l!=="bsq"&&l!=="bip"&&l!=="deflate"&&l!=="lzw")&&(l=Pt(e)),t.useCanvas&&br.has(l)?c=await Pr(e,l,t,r):(f=Lr(l),t.isPoint&&((t=ie({},t)).width++,t.height++),c=await f(e,t),t.isPoint&&Ur(c)),c)}let Q=class extends We{constructor(){super(...arguments),this.blockWidth=void 0,this.blockHeight=void 0,this.compression=null,this.origin=null,this.firstPyramidLevel=null,this.maximumPyramidLevel=null,this.pyramidScalingFactor=2,this.pyramidBlockWidth=null,this.pyramidBlockHeight=null,this.isVirtualTileInfo=!1,this.tileInfo=null,this.blockBoundary=null}};$([K({type:Number,json:{write:!0}})],Q.prototype,"blockWidth",void 0),$([K({type:Number,json:{write:!0}})],Q.prototype,"blockHeight",void 0),$([K({type:String,json:{write:!0}})],Q.prototype,"compression",void 0),$([K({type:Vt,json:{write:!0}})],Q.prototype,"origin",void 0),$([K({type:Number,json:{write:!0}})],Q.prototype,"firstPyramidLevel",void 0),$([K({type:Number,json:{write:!0}})],Q.prototype,"maximumPyramidLevel",void 0),$([K({json:{write:!0}})],Q.prototype,"pyramidResolutions",void 0),$([K({type:Number,json:{write:!0}})],Q.prototype,"pyramidScalingFactor",void 0),$([K({type:Number,json:{write:!0}})],Q.prototype,"pyramidBlockWidth",void 0),$([K({type:Number,json:{write:!0}})],Q.prototype,"pyramidBlockHeight",void 0),$([K({type:Boolean,json:{write:!0}})],Q.prototype,"isVirtualTileInfo",void 0),$([K({json:{write:!0}})],Q.prototype,"tileInfo",void 0),$([K()],Q.prototype,"blockBoundary",void 0),Q=$([Ke("esri.layers.support.RasterStorageInfo")],Q);const Rr=Q;let q=class extends We{constructor(e){super(e),this.attributeTable=null,this.bandCount=null,this.colormap=null,this.extent=null,this.format=void 0,this.height=null,this.width=null,this.histograms=null,this.keyProperties={},this.multidimensionalInfo=null,this.noDataValue=null,this.pixelSize=null,this.pixelType=null,this.isPseudoSpatialReference=!1,this.spatialReference=null,this.statistics=null,this.storageInfo=null,this.transform=null}get dataType(){var e,t,r;const f=(e=(t=this.keyProperties)==null||(r=t.DataType)==null?void 0:r.toLowerCase())!=null?e:"generic";return f==="stdtime"?"standard-time":f}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(e){e&&this._set("nativeExtent",e)}get nativePixelSize(){if(!te(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const e=this.nativeExtent;return{x:e.width/this.width,y:e.height/this.height}}};$([K({json:{write:!0}})],q.prototype,"attributeTable",void 0),$([K({json:{write:!0}})],q.prototype,"bandCount",void 0),$([K({json:{write:!0}})],q.prototype,"colormap",void 0),$([K({type:String,readOnly:!0})],q.prototype,"dataType",null),$([K({type:tt,json:{write:!0}})],q.prototype,"extent",void 0),$([K({type:tt,json:{write:!0}})],q.prototype,"nativeExtent",null),$([K({json:{write:!0}})],q.prototype,"nativePixelSize",null),$([K({json:{write:!0}})],q.prototype,"format",void 0),$([K({json:{write:!0}})],q.prototype,"height",void 0),$([K({json:{write:!0}})],q.prototype,"width",void 0),$([K({json:{write:!0}})],q.prototype,"histograms",void 0),$([K({json:{write:!0}})],q.prototype,"keyProperties",void 0),$([K({json:{write:!0}})],q.prototype,"multidimensionalInfo",void 0),$([K()],q.prototype,"noDataValue",void 0),$([K({json:{write:!0}})],q.prototype,"pixelSize",void 0),$([K({json:{write:!0}})],q.prototype,"pixelType",void 0),$([K()],q.prototype,"isPseudoSpatialReference",void 0),$([K({type:_t,json:{write:!0}})],q.prototype,"spatialReference",void 0),$([K({json:{write:!0}})],q.prototype,"statistics",void 0),$([K({type:Rr,json:{write:!0}})],q.prototype,"storageInfo",void 0),$([K({json:{write:!0}})],q.prototype,"transform",void 0),q=$([Ke("esri.layers.support.RasterInfo")],q);const Mr=q;function Lt(e){let{altitude:t,azimuth:r}=e;const{hillshadeType:f,pixelSizePower:c,pixelSizeFactor:l,scalingType:p,isGCS:n,resolution:u}=e,a=f==="multi-directional"?2*e.zFactor:e.zFactor,{x:o,y:m}=u;let d=a/(8*o),v=a/(8*m);if(n&&a>.001&&(d/=111e3,v/=111e3),p==="adjusted")if(n){const L=111e3*o,x=111e3*m;d=(a+L**c*l)/(8*L),v=(a+x**c*l)/(8*x)}else d=(a+o**c*l)/(8*o),v=(a+m**c*l)/(8*m);let A=(90-t)*Math.PI/180,g=Math.cos(A),w=(360-r+90)*Math.PI/180,i=Math.sin(A)*Math.cos(w),h=Math.sin(A)*Math.sin(w);const S=[315,270,225,360,180,0],b=[60,60,60,60,60,90],s=new Float32Array([3,5,3,2,1,4]),T=s.reduce((L,x)=>L+x),y=s.map(L=>L/T),E=f==="multi-directional"?S.length:1,I=new Float32Array(6),k=new Float32Array(6),C=new Float32Array(6);if(f==="multi-directional")for(let L=0;L<E;L++)t=b[L],r=S[L],A=(90-t)*Math.PI/180,g=Math.cos(A),w=(360-r+90)*Math.PI/180,i=Math.sin(A)*Math.cos(w),h=Math.sin(A)*Math.sin(w),I[L]=g,k[L]=i,C[L]=h;else I.fill(g),k.fill(i),C.fill(h);return{resolution:u,factor:[d,v],sinZcosA:i,sinZsinA:h,cosZ:g,sinZcosAs:k,sinZsinAs:C,cosZs:I,weights:y,hillshadeType:["traditional","multi-directional"].indexOf(f)}}function Gr(e,t){if(!Ue(e))return e;const{width:r,height:f,mask:c}=e,l=new Uint8Array(r*f);c&&l.set(c);const{factor:p,sinZcosA:n,sinZsinA:u,cosZ:a,sinZcosAs:o,sinZsinAs:m,cosZs:d,weights:v}=Lt(t),[A,g]=p,{hillshadeType:w}=t,i=e.pixels[0],h=new Uint8Array(r*f);let S,b,s,T,y,E,I,k;const C=1;for(let L=C;L<f-C;L++){const x=L*r;for(let P=C;P<r-C;P++){if(c&&!c[x+P]){h[x+P]=0;continue}let R=8;if(c&&(R=c[x-r+P-1]+c[x-r+P]+c[x-r+P+1]+c[x+P-1]+c[x+P+1]+c[x+r+P-1]+c[x+r+P]+c[x+r+P+1],R<7)){h[x+P]=0,l[x+P]=0;continue}R===7?(S=c[x-r+P-1]?i[x-r+P-1]:i[x+P],b=c[x-r+P]?i[x-r+P]:i[x+P],s=c[x-r+P+1]?i[x-r+P+1]:i[x+P],T=c[x+P-1]?i[x+P-1]:i[x+P],y=c[x+P+1]?i[x+P+1]:i[x+P],E=c[x+r+P-1]?i[x+r+P-1]:i[x+P],I=c[x+r+P]?i[x+r+P]:i[x+P],k=c[x+r+P+1]?i[x+r+P+1]:i[x+P]):(S=i[x-r+P-1],b=i[x-r+P],s=i[x-r+P+1],T=i[x+P-1],y=i[x+P+1],E=i[x+r+P-1],I=i[x+r+P],k=i[x+r+P+1]);const D=(s+y+y+k-(S+T+T+E))*A,O=(E+I+I+k-(S+b+b+s))*g,V=Math.sqrt(1+D*D+O*O);let _=0;if(w==="traditional"){let U=255*(a+u*O-n*D)/V;U<0&&(U=0),_=U}else{const U=m.length;for(let G=0;G<U;G++){let N=255*(d[G]+m[G]*O-o[G]*D)/V;N<0&&(N=0),_+=N*v[G]}}h[x+P]=255&_}}for(let L=0;L<f;L++)h[L*r]=h[L*r+1],h[(L+1)*r-1]=h[(L+1)*r-2];for(let L=1;L<r-1;L++)h[L]=h[L+r],h[L+(f-1)*r]=h[L+(f-2)*r];return new oe({width:r,height:f,pixels:[h],mask:c?l:null,pixelType:"u8",validPixelCount:e.validPixelCount,statistics:[{minValue:0,maxValue:255}]})}function Dr(e,t,r,f){if(!Ue(e)||!Ue(t))return;const{min:c,max:l}=f,p=e.pixels[0],{pixels:n,mask:u}=t,a=n[0],o=255.00001/(l-c),m=new Uint8ClampedArray(a.length),d=new Uint8ClampedArray(a.length),v=new Uint8ClampedArray(a.length),A=r.length-1;for(let g=0;g<a.length;g++){if(u&&u[g]===0)continue;const w=Math.floor((a[g]-c)*o),[i,h]=r[w<0?0:w>A?A:w],S=p[g],b=S*h,s=b*(1-Math.abs(i%2-1)),T=S-b;switch(Math.floor(i)){case 0:m[g]=b+T,d[g]=s+T,v[g]=T;break;case 1:m[g]=s+T,d[g]=b+T,v[g]=T;break;case 2:m[g]=T,d[g]=b+T,v[g]=s+T;break;case 3:m[g]=T,d[g]=s+T,v[g]=b+T;break;case 4:m[g]=s+T,d[g]=T,v[g]=b+T;break;case 5:case 6:m[g]=b+T,d[g]=T,v[g]=s+T}}e.pixels=[m,d,v],e.updateStatistics()}const gt=$t.getLogger("esri.renderers.support.RasterSymbolizer");function Nr(e,t){const{attributeTable:r,bandCount:f}=e;return!(!te(r)||f>1||t&&r.fields.find(c=>c.name.toLowerCase()===t.toLowerCase())==null)}function Fr(e){return e.dataType==="elevation"}function Br(e){const{bandCount:t,colormap:r}=e;return te(r)&&r.length&&t===1}const yt={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};let ye=class extends We{constructor(e){super(e)}bind(){const{rendererJSON:e}=this;if(!e)return{success:!1};let t;switch(this.lookup={rendererJSON:{}},e.type){case"uniqueValue":t=this._updateUVRenderer(e);break;case"rasterColormap":t=this._updateColormapRenderer(e);break;case"rasterStretch":t=this._updateStretchRenderer(e);break;case"classBreaks":t=this._updateClassBreaksRenderer(e);break;case"rasterShadedRelief":t=this._updateShadedReliefRenderer(e);break;case"vectorField":t=this._updateVectorFieldRenderer();break;case"flowRenderer":t=this._updateFlowRenderer()}return t}symbolize(e){let t=e&&e.pixelBlock;if(!wt(t))return t;if(e.simpleStretchParams&&this.rendererJSON.type==="rasterStretch")return this.simpleStretch(t,e.simpleStretchParams);try{let r;switch(t.pixels.length>3&&(t=rt(t,[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":r=this._symbolizeColormap(t);break;case"classBreaks":r=this._symbolizeClassBreaks(t);break;case"rasterStretch":r=this._symbolizeStretch(t,e.bandIds);break;case"rasterShadedRelief":{const{extent:f}=e,c=f.spatialReference.isGeographic,l={x:(f.xmax-f.xmin)/t.width,y:(f.ymax-f.ymin)/t.height};r=this._symbolizeShadedRelief(t,{isGCS:c,resolution:l});break}}return r}catch(r){return gt.error("symbolize",r.message),t}}simpleStretch(e,t){if(!wt(e))return e;try{return e.pixels.length>3&&(e=rt(e,[0,1,2])),De(e,t)}catch(r){return gt.error("symbolize",r.message),e}}generateWebGLParameters(e){if(["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)>-1){var t;const{indexedColormap:n,offset:u}=((t=this.lookup)==null?void 0:t.colormapLut)||{};return{colormap:n,colormapOffset:u,type:"lut"}}const{pixelBlock:r,isGCS:f,resolution:c,bandIds:l}=e,{rendererJSON:p}=this;return p.type==="rasterStretch"?this._generateStretchWebGLParams(r,p,l):p.type==="rasterShadedRelief"?this._generateShadedReliefWebGLParams(p,f,c):p.type==="vectorField"?this._generateVectorFieldWebGLParams(p):null}_isLUTChanged(e){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const t=this.rendererJSON.colorRamp;return e?JSON.stringify(t)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):(this.rendererJSON,this.lookup.rendererJSON,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}_symbolizeColormap(e){return this._isLUTChanged()&&!this.bind().success?e:Ne(e,this.lookup.colormapLut)}_symbolizeClassBreaks(e){const t=this.rasterInfo.pixelType,r=["u8","u16","s8","s16"].indexOf(t)>-1;return this._isLUTChanged()&&!this.bind().success?e:r?Ne(e,this.lookup.colormapLut):jt(e,this.lookup.remapLut)}_symbolizeStretch(e,t){const{pixelType:r,bandCount:f}=this.rasterInfo,c=this.rendererJSON,l=["u8","u16","s8","s16"].indexOf(r)>-1;let p,n;const{dra:u}=c,a=c.useGamma?c.gamma:null;if(c.stretchType==="histogramEqualization"){const d=u?null:this.lookup.histogramLut,v=this._getStretchCutoff(c,e,t,!d),A=De(e,he(ie({},v),{gamma:a}));n=nt(A,{lut:u?v.histogramLut:d,offset:0})}else if(l){var o,m;if(u){const d=this._getStretchCutoff(c,e,t);p=it(he(ie({pixelType:r},d),{gamma:a}))}else if(this._isLUTChanged()){if(!this.bind().success)return e;p=this.lookup?this.lookup.stretchLut:null}else p=this.lookup?this.lookup.stretchLut:null;if(!p)return e;f>1&&(t==null?void 0:t.length)===((o=Te(e))==null?void 0:o.pixels.length)&&((m=p)==null?void 0:m.lut.length)===f&&(p={lut:t.map(d=>p.lut[d]),offset:p.offset}),n=nt(e,p)}else{const d=this._getStretchCutoff(c,e,t);n=De(e,he(ie({},d),{gamma:a}))}if(c.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return e;n=Ne(n,this.lookup.colormapLut)}return n}_symbolizeShadedRelief(e,t){var r,f;const c=this.rendererJSON,l=ie(ie({},c),t),p=Gr(e,l);if(!c.colorRamp)return p;let n;if(this._isLUTChanged(!0)){if(!this.bind().success)return p;n=this.lookup?this.lookup.hsvMap:null}else n=this.lookup?this.lookup.hsvMap:null;if(!n)return p;const u=(r=(f=Te(this.rasterInfo.statistics))==null?void 0:f[0])!=null?r:{min:0,max:8e3};return Dr(p,e,n,u),p}_isVectorFieldData(){const{bandCount:e,dataType:t}=this.rasterInfo;return e===2&&(t==="vector-magdir"||t==="vector-uv")}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(e){const{bandCount:t,attributeTable:r,pixelType:f}=this.rasterInfo,c=e.field1;if(!c)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const l=e.defaultSymbol,p=t===1&&["u8","s8"].includes(f);if(!Nr(this.rasterInfo,c)&&!p)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const n=[];if(r){const a=r.fields.find(o=>o.name.toLowerCase()==="value");if(!a)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};r.features.forEach(o=>{var m;const d=e.uniqueValueInfos.find(A=>String(A.value)===String(o.attributes[c])),v=d==null||(m=d.symbol)==null?void 0:m.color;v?n.push([o.attributes[a.name]].concat(v)):l&&n.push([o.attributes[a.name]].concat(l.color))})}else{if(c.toLowerCase()!=="value")return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};e.uniqueValueInfos.forEach(a=>{var o;const m=a==null||(o=a.symbol)==null?void 0:o.color;m?n.push([parseInt(""+a.value,10)].concat(m)):l&&n.push([parseInt(""+a.value,10)].concat(l.color))})}if(n.length===0)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};const u=ke({colormap:n});return this.lookup={rendererJSON:e,colormapLut:u},this.canRenderInWebGL=!0,{success:!0}}_updateColormapRenderer(e){if(!Br(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};const t=e.colormapInfos.map(f=>[f.value].concat(f.color)).sort((f,c)=>f[0]-c[0]);if(!t||t.length===0)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};const r=ke({colormap:t});return this.lookup={rendererJSON:e,colormapLut:r},this.canRenderInWebGL=!0,{success:!0}}_updateShadedReliefRenderer(e){if(!Fr(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation".`};if(e.colorRamp){const t=at(e.colorRamp,256,!0),r=ke({colormap:t}),f=[],c=r.indexedColormap;for(let l=0;l<c.length;l+=4){const p=Kt({r:c[l],g:c[l+1],b:c[l+2]});f.push([p.h/60,p.s/100,255*p.v/100])}this.lookup={rendererJSON:e,colormapLut:r,hsvMap:f}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}_updateClassBreaksRenderer(e){const t=this.rasterInfo.pixelType,r=["u8","u16","s8","s16"].indexOf(t)>-1,f=e.classBreakInfos;if(f==null||!f.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};const c=f.sort((o,m)=>o.classMaxValue-m.classMaxValue),l=c[c.length-1];let p=e.minValue;if(!r){const o=[];for(let m=0;m<c.length;m++){var n;o.push({value:(n=c[m].classMinValue)!=null?n:p,mappedColor:c[m].symbol.color}),p=c[m].classMaxValue}return o.push({value:l.classMaxValue,mappedColor:l.symbol.color}),this.lookup={rendererJSON:e,remapLut:o},this.canRenderInWebGL=!1,{success:!0}}const u=[];p=Math.floor(e.minValue);for(let o=0;o<c.length;o++){const m=c[o];for(let d=p;d<m.classMaxValue;d++)u.push([d].concat(m.symbol.color));p=Math.ceil(m.classMaxValue)}l.classMaxValue===p&&u.push([l.classMaxValue].concat(l.symbol.color));const a=ke({colormap:u,fillUnspecified:!1});return this.lookup={rendererJSON:e,colormapLut:a},this.canRenderInWebGL=!0,{success:!0}}_isHistogramRequired(e){return e==="percentClip"||e==="histogramEqualization"}_isValidRasterStatistics(e){return te(e)&&e.length>0&&e[0].min!=null&&e[0].max!=null}_updateStretchRenderer(e){var t;let{stretchType:r,dra:f}=e;if(!(r==="none"||(t=e.statistics)!=null&&t.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||f))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};const c=Te(e.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(e.stretchType)||c!=null&&c.length||f||(r="minMax");const{gamma:l,useGamma:p,colorRamp:n}=e,u=this.rasterInfo.pixelType,a=!f&&["u8","u16","s8","s16"].indexOf(u)>-1;if(r==="histogramEqualization"){const o=c.map(m=>st(m));this.lookup={rendererJSON:e,histogramLut:o}}else if(a){const o=this._getStretchCutoff(e),m=it(he(ie({pixelType:u},o),{gamma:p?l:null}));this.lookup={rendererJSON:e,stretchLut:m}}if(n){const o=at(n,256,!0);this.lookup||(this.lookup={rendererJSON:e}),this.lookup.colormapLut=ke({colormap:o}),this.lookup.rendererJSON=e}return this.canRenderInWebGL=!0,{success:!0}}_getStretchCutoff(e,t=null,r,f){var c,l,p;let n,u,a=e.stretchType;var o;if(e.dra)if(a==="minMax"&&te(t)&&t.statistics)n=t.statistics.map(C=>[C.minValue,C.maxValue,0,0]);else{const C=Wt(t);n=te(C)?C.statistics:null,u=te(C)?C.histograms:null}else n=((o=e.statistics)==null?void 0:o.length)>0?e.statistics:Te(this.rasterInfo.statistics),u=e.histograms||Te(this.rasterInfo.histograms);!this._isHistogramRequired(a)||(c=u)!=null&&c.length||(a="minMax");const m=((l=n)==null?void 0:l.length)||((p=u)==null?void 0:p.length)||this.rasterInfo.bandCount,d=[],v=[];let A,g,w,i,h,S,b,s,T,y,E,I;switch(n&&!Array.isArray(n[0])&&(n=n.map(C=>[C.min,C.max,C.avg,C.stddev])),a){case"none":{const C=yt[this.rasterInfo.pixelType]||yt.f32;for(s=0;s<m;s++)d[s]=C[0],v[s]=C[1]}break;case"minMax":for(s=0;s<m;s++)d[s]=n[s][0],v[s]=n[s][1];break;case"standardDeviation":for(s=0;s<m;s++)d[s]=n[s][2]-e.numberOfStandardDeviations*n[s][3],v[s]=n[s][2]+e.numberOfStandardDeviations*n[s][3],d[s]<n[s][0]&&(d[s]=n[s][0]),v[s]>n[s][1]&&(v[s]=n[s][1]);break;case"histogramEqualization":for(s=0;s<m;s++)d[s]=u[s].min,v[s]=u[s].max;break;case"percentClip":for(s=0;s<u.length;s++){for(A=u[s],h=new Uint32Array(A.size),i=[...A.counts],i.length>=20&&(i[0]=i[1]=i[2]=i[i.length-1]=i[i.length-2]=0),w=0,g=(A.max-A.min)/A.size,b=A.min===-.5&&g===1?.5:0,T=0;T<A.size;T++)w+=i[T],h[T]=w;for(S=(e.minPercent||0)*w/100,T=0;T<A.size;T++)if(h[T]>S){d[s]=A.min+g*(T+b);break}for(S=(1-(e.maxPercent||0)/100)*w,T=A.size-2;T>=0;T--)if(h[T]<S){v[s]=A.min+g*(T+2-b);break}}break;default:for(s=0;s<m;s++)d[s]=n[s][0],v[s]=n[s][1]}a==="histogramEqualization"?(E=u[0].size||256,y=0,f&&(I=u.map(C=>st(C)))):(E=e.max||255,y=e.min||0);const k={minCutOff:d,maxCutOff:v,outMax:E,outMin:y,histogramLut:I};return this._getSelectedBandCutoffs(k,r)}_getSelectedBandCutoffs(e,t){if(t==null||t.length===0)return e;const r=Math.max.apply(null,t),{minCutOff:f,maxCutOff:c,outMin:l,outMax:p,histogramLut:n}=e;return f.length===t.length||f.length<=r?e:{minCutOff:t.map(u=>f[u]),maxCutOff:t.map(u=>c[u]),histogramLut:n?t.map(u=>n[u]):null,outMin:l,outMax:p}}_generateStretchWebGLParams(e,t,r){let f=null,c=null;const l=this.lookup&&this.lookup.colormapLut;t.colorRamp&&l&&(f=l.indexedColormap,c=l.offset),t.stretchType==="histogramEqualization"&&(t=he(ie({},t),{stretchType:"minMax"}));const{gamma:p}=t,n=!!(t.useGamma&&p&&p.some(h=>h!==1)),{minCutOff:u,maxCutOff:a,outMin:o,outMax:m}=this._getStretchCutoff(t,e,r);let d=0;te(e)&&(d=e.getPlaneCount(),d===2&&((e=e.clone()).statistics=[e.statistics[0]],e.pixels=[e.pixels[0]]));const v=Math.min(3,(r==null?void 0:r.length)||d||this.rasterInfo.bandCount),A=new Float32Array(v),g=f||n?1:255;let w;for(w=0;w<v;w++)A[w]=(m-o)/(a[w]-u[w])/g;const i=new Float32Array(v);if(n)for(w=0;w<v;w++)p[w]>1?p[w]>2?i[w]=6.5+(p[w]-2)**2.5:i[w]=6.5+100*(2-p[w])**4:i[w]=1;return{bandCount:v,outMin:o/g,outMax:m/g,minCutOff:u,maxCutOff:a,factor:A,useGamma:n,gamma:n?p:[1,1,1],gammaCorrection:n?i:[1,1,1],colormap:f,colormapOffset:c,stretchType:t.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(e,t,r){var f,c,l;let p=null,n=null;const u=this.lookup&&this.lookup.colormapLut;e.colorRamp&&u&&(p=u.indexedColormap,n=u.offset);const a=he(ie({},e),{isGCS:t,resolution:r}),o=Lt(a),m=(f=Te(this.rasterInfo.statistics))==null?void 0:f[0];return he(ie({},o),{minValue:(c=m==null?void 0:m.min)!=null?c:0,maxValue:(l=m==null?void 0:m.max)!=null?l:8e3,hillshadeType:e.hillshadeType==="traditional"?0:1,type:"hillshade",colormap:p,colormapOffset:n})}_generateVectorFieldWebGLParams(e){var t,r,f,c,l,p,n,u;const{style:a,inputUnit:o,outputUnit:m,visualVariables:d,symbolTileSize:v,flowRepresentation:A}=e;let g;const w=(t=(r=this.rasterInfo.statistics)==null?void 0:r[0].min)!=null?t:0,i=(f=(c=this.rasterInfo.statistics)==null?void 0:c[0].max)!=null?f:50,h=(l=d==null?void 0:d.find(I=>I.type==="sizeInfo"))!=null?l:{type:"sizeInfo",field:"Magnitude",maxDataValue:i,maxSize:.8*v,minDataValue:w,minSize:.2*v},S=(p=h.minDataValue)!=null?p:w,b=(n=h.maxDataValue)!=null?n:i,s=te(h.maxSize)&&te(h.minSize)?[h.minSize/v,h.maxSize/v]:[.2,.8];if(a==="wind_speed"){const I=(s[0]+s[1])/2;s[0]=s[1]=I}const T=te(S)&&te(b)?[S,b]:null;if(a==="classified_arrow")if(te(S)&&te(b)&&te(h)){g=[];const I=(h.maxDataValue-h.minDataValue)/5;for(let k=0;k<6;k++)g.push(h.minDataValue+I*k)}else g=[0,1e-6,3.5,7,10.5,14];const y=A==="flow_to"==(a==="ocean_current_kn"||a==="ocean_current_m")?0:Math.PI,E=d==null?void 0:d.find(I=>I.type==="rotationInfo");return{breakValues:g,dataRange:T,inputUnit:o,outputUnit:m,symbolTileSize:v,symbolPercentRange:s,style:a||"single_arrow",rotation:y,rotationType:((u=this.rasterInfo.storageInfo)==null?void 0:u.tileInfo)&&this.rasterInfo.dataType==="vector-uv"?"geographic":(E==null?void 0:E.rotationType)||e.rotationType,type:"vectorField"}}};function wt(e){return Ue(e)&&e.validPixelCount!==0}$([K({json:{write:!0}})],ye.prototype,"rendererJSON",void 0),$([K({type:Mr,json:{write:!0}})],ye.prototype,"rasterInfo",void 0),$([K({json:{write:!0}})],ye.prototype,"lookup",void 0),$([K()],ye.prototype,"canRenderInWebGL",void 0),ye=$([Ke("esri.renderers.support.RasterSymbolizer")],ye);const Kr=ye;export{mr as N,$r as O,pr as P,jr as S,Kr as T,Ye as a,He as b,Xe as c,Mr as l,Ie as n,Rr as p,Qt as r,hr as x};
