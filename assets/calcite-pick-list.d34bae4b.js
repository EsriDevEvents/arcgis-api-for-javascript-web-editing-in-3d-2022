import{tT as k,tU as h,pb as O,pa as c,tS as V,tV as P,tE as x,pd as D,p4 as E,p5 as I,tK as z,pc as C,tB as A}from"./vendor.1dc52be5.js";import{C as T,S as U,I as g}from"./resources3.be34fb1b.js";import{d as F}from"./input.e5d4ba27.js";import{d as S}from"./progress.d2aa97c9.js";import{d as L}from"./scrim.73d5c2c4.js";import{f as R}from"./forIn.4b06685c.js";import"./label.46b81f19.js";import"./form.a5cd6fd3.js";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 */function $(){this.setUpItems(),this.setUpFilter(),this.deselectRemovedItems()}const j=["ArrowUp","ArrowDown"];function K(){this.setUpItems(),this.setUpFilter(),this.emitCalciteListChange=k(J.bind(this),0)}function M(){var t;(t=this.mutationObserver)===null||t===void 0||t.observe(this.el,{childList:!0,subtree:!0})}function B(){var t;(t=this.mutationObserver)===null||t===void 0||t.disconnect()}function q(t){const{selectedValues:e}=this,{item:i,value:a,selected:n,shiftPressed:s}=t.detail;n?(this.multiple&&s&&this.selectSiblings(i),this.multiple||this.deselectSiblingItems(i),e.set(a,i)):(e.delete(a),this.multiple&&s&&this.selectSiblings(i,!0)),this.multiple||(m(i,n),n&&h(i)),this.lastSelectedItem=i,this.emitCalciteListChange()}function Y(t){t.stopPropagation();const e=t.detail.oldValue,i=this.selectedValues;if(i.has(e)){const a=i.get(e);i.delete(e),i.set(t.detail.newValue,a)}}function G(t){return!!j.find(e=>e===t)}function W(t){const{el:e,items:i,multiple:a,selectedValues:n}=this;a||e.contains(t.relatedTarget)||i.forEach(l=>{m(l,n.size===0?l.contains(t.target)||t.target===l:l.selected)})}function X(t){const{key:e,target:i}=t;if(!G(e))return;const{items:a,multiple:n,selectionFollowsFocus:s}=this,{length:l}=a,r=a.indexOf(i);if(!l||r===-1)return;t.preventDefault();const o=P(r+(e==="ArrowUp"?-1:1),l),d=a[o];a.forEach(b=>m(b,b===d)),!n&&s&&(d.selected=!0),h(d)}function J(){this.calciteListChange.emit(this.selectedValues)}function Q(t){if(t.defaultPrevented)return;const e=t.target,i=this.selectedValues;e.parentElement.tagName==="CALCITE-PICK-LIST-GROUP"?(e.parentElement.remove(),Array.from(e.parentElement.children).forEach(a=>i.delete(a.value))):(e.remove(),i.delete(e.value)),this.emitCalciteListChange()}function m(t,e){e?t.removeAttribute("tabindex"):t.setAttribute("tabindex","-1")}async function Z(t){if(this.filterEnabled&&t==="filter"){await h(this.filterEl);return}const{items:e,multiple:i,selectionFollowsFocus:a}=this;if(e.length===0)return;if(i)return e[0].setFocus();const n=e.find(s=>s.selected)||e[0];return a&&(n.selected=!0),n.setFocus()}function N(t){this.items=Array.from(this.el.querySelectorAll(t));let e=!1;const{items:i}=this;i.forEach(n=>{n.icon=this.getIconType(),this.multiple||(n.disableDeselect=!0,m(n,!1)),n.selected&&(e=!0,m(n,!0),this.selectedValues.set(n.value,n))});const[a]=i;!e&&a&&m(a,!0)}function tt(){const t=this.selectedValues,e=this.items.map(({value:i})=>i);t.forEach(i=>{e.includes(i.value)||this.selectedValues.delete(i.value)})}function et(t){this.items.forEach(e=>{e.value!==t.value&&(e.toggleSelected(!1),this.selectedValues.has(e.value)&&this.selectedValues.delete(e.value))})}function it(t,e=!1){if(!this.lastSelectedItem)return;const{items:i}=this,a=i.findIndex(s=>s.value===this.lastSelectedItem.value),n=i.findIndex(s=>s.value===t.value);i.slice(Math.min(a,n),Math.max(a,n)).forEach(s=>{s.toggleSelected(!e),e?this.selectedValues.delete(s.value):this.selectedValues.set(s.value,s)})}let f;function at(t){const{filteredItems:e}=t.currentTarget,i=e.map(s=>s.value);let a=!1;f||(f=new Set);const n=this.items.filter(s=>{const l=s.parentElement;l.matches("calcite-pick-list-group")&&f.add(l);const o=i.includes(s.value);return s.hidden=!o,a||(a=o&&s.selected),o});f.forEach(s=>{const l=n.some(o=>s.contains(o));if(s.hidden=!l,!l)return;const r=O(s,"parent-item");r&&(r.hidden=!1,n.includes(r)&&Array.from(s.children).forEach(o=>o.hidden=!1))}),f.clear(),n.length>0&&!a&&!this.multiple&&m(n[0],!0)}function nt(){return this.items.map(t=>({label:t.label,description:t.description,metadata:t.metadata,value:t.value}))}var st=function(t,e){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(i[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(i[a[n]]=t[a[n]]);return i};const lt=t=>{var{props:{disabled:e,loading:i,filterEnabled:a,dataForFilter:n,handleFilter:s,filterPlaceholder:l,setFilterEl:r}}=t,o=st(t,["props"]);const d=c("slot",null);return c(V,Object.assign({"aria-busy":i.toString(),"aria-disabled":e.toString(),role:"menu"},o),c("section",null,c("header",{class:{[T.sticky]:!0}},a?c("calcite-filter",{"aria-label":l,disabled:i||e,items:n,onCalciteFilterChange:s,placeholder:l,ref:r}):null,c("slot",{name:U.menuActions})),i||e?c("calcite-scrim",{loading:i}):null,d))};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 */const w={container:"container",searchIcon:"search-icon",clearButton:"clear-button"},y={filterLabel:"Filter",clear:"Clear filter"},v={search:"search",close:"x"},rt="@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:host{-webkit-box-sizing:border-box;box-sizing:border-box;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-2);font-size:var(--calcite-font-size--1)}:host *{-webkit-box-sizing:border-box;box-sizing:border-box}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host{display:-ms-flexbox;display:flex;width:100%}.container{display:-ms-flexbox;display:flex;width:100%;padding:0.5rem}label{position:relative;margin-left:0.25rem;margin-right:0.25rem;margin-top:0px;margin-bottom:0px;display:-ms-flexbox;display:flex;width:100%;-ms-flex-align:center;align-items:center;overflow:hidden}input[type=text]{margin-bottom:0.25rem;width:100%;border-style:none;background-color:transparent;padding-top:0.25rem;padding-bottom:0.25rem;padding-right:0.25rem;padding-left:1.5rem;font-family:inherit;font-size:var(--calcite-font-size--2);line-height:1rem;color:var(--calcite-ui-text-1);-webkit-transition:padding var(--calcite-animation-timing), -webkit-box-shadow var(--calcite-animation-timing);transition:padding var(--calcite-animation-timing), -webkit-box-shadow var(--calcite-animation-timing);transition:padding var(--calcite-animation-timing), box-shadow var(--calcite-animation-timing);transition:padding var(--calcite-animation-timing), box-shadow var(--calcite-animation-timing), -webkit-box-shadow var(--calcite-animation-timing)}input[type=text]::-ms-clear{display:none}calcite-input{width:100%}.search-icon{position:absolute;display:-ms-flexbox;display:flex;color:var(--calcite-ui-text-2);inset-inline-start:0;-webkit-transition:left var(--calcite-animation-timing), right var(--calcite-animation-timing), opacity var(--calcite-animation-timing);transition:left var(--calcite-animation-timing), right var(--calcite-animation-timing), opacity var(--calcite-animation-timing)}input[type=text]:focus{border-color:var(--calcite-ui-brand);outline:2px solid transparent;outline-offset:2px;padding-inline:0.25rem}input[type=text]:focus~.search-icon{inset-inline-start:calc(1rem * -1);opacity:0}.clear-button{display:-ms-flexbox;display:flex;cursor:pointer;-ms-flex-align:center;align-items:center;border-width:0px;background-color:transparent;color:var(--calcite-ui-text-2)}.clear-button:hover,.clear-button:focus{color:var(--calcite-ui-text-1)}",ct=250;let p=class extends E{constructor(){super();this.__registerHost(),this.__attachShadow(),this.calciteFilterChange=I(this,"calciteFilterChange",7),this.disabled=!1,this.filteredItems=[],this.scale="m",this.filter=k(t=>{const e=new RegExp(t,"i");if(this.items.length===0){this.updateFiltered([]);return}const i=(n,s)=>{let l=!1;return R(n,r=>{typeof r!="function"&&(Array.isArray(r)||typeof r=="object"&&r!==null?i(r,s)&&(l=!0):s.test(r)&&(l=!0))}),l},a=this.items.filter(n=>i(n,e));this.updateFiltered(a)},ct),this.inputHandler=t=>{const e=t.target;this.value=e.value},this.keyDownHandler=({key:t})=>{t==="Escape"&&this.clear()},this.clear=()=>{this.value="",this.setFocus()}}watchItemsHandler(){this.filter(this.value)}valueHandler(t){this.filter(t)}async setFocus(){h(this.textInput)}updateFiltered(t){this.filteredItems.length=0,this.filteredItems=this.filteredItems.concat(t),this.calciteFilterChange.emit()}render(){const{disabled:t,scale:e}=this;return c(z,null,t?c("calcite-scrim",null):null,c("div",{class:w.container},c("label",null,c("calcite-input",{"aria-label":this.intlLabel||y.filterLabel,disabled:this.disabled,icon:v.search,onCalciteInputInput:this.inputHandler,onKeyDown:this.keyDownHandler,placeholder:this.placeholder,ref:i=>{this.textInput=i},scale:e,type:"text",value:this.value})),this.value?c("button",{"aria-label":this.intlClear||y.clear,class:w.clearButton,onClick:this.clear},c("calcite-icon",{icon:v.close,scale:e})):null))}get el(){return this}static get watchers(){return{items:["watchItemsHandler"],value:["valueHandler"]}}static get style(){return rt}};p=C(p,[1,"calcite-filter",{items:[1040],disabled:[516],filteredItems:[1040],intlClear:[1,"intl-clear"],intlLabel:[1,"intl-label"],placeholder:[1],scale:[513],value:[1025],setFocus:[64]}]);function _(){if(typeof customElements=="undefined")return;["calcite-filter","calcite-icon","calcite-input","calcite-loader","calcite-progress","calcite-scrim"].forEach(e=>{switch(e){case"calcite-filter":customElements.get(e)||customElements.define(e,p);break;case"calcite-icon":customElements.get(e)||D();break;case"calcite-input":customElements.get(e)||F();break;case"calcite-loader":customElements.get(e)||x();break;case"calcite-progress":customElements.get(e)||S();break;case"calcite-scrim":customElements.get(e)||L();break}})}_();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 */const ot="@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-ms-flex-positive:1;flex-grow:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:stretch;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-ui-text-2)}:host *{-webkit-box-sizing:border-box;box-sizing:border-box}:host([filter-enabled]) header{margin-bottom:0.25rem;display:-ms-flexbox;display:flex;-ms-flex-align:stretch;align-items:stretch;-ms-flex-pack:end;justify-content:flex-end;background-color:var(--calcite-ui-foreground-1);--tw-shadow:0 1px 0 var(--calcite-ui-border-3);--tw-shadow-colored:0 1px 0 var(--tw-shadow-color);-webkit-box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([filter-enabled]) header.sticky-pos{position:-webkit-sticky;position:sticky;top:0px;z-index:1}calcite-filter{margin-bottom:0px}:host([loading][disabled]){min-height:2rem}";let u=class extends E{constructor(){super();this.__registerHost(),this.__attachShadow(),this.calciteListChange=I(this,"calciteListChange",7),this.disabled=!1,this.filterEnabled=!1,this.loading=!1,this.multiple=!1,this.selectionFollowsFocus=!1,this.selectedValues=new Map,this.dataForFilter=[],this.lastSelectedItem=null,this.mutationObserver=A("mutation",$.bind(this)),this.setFilterEl=t=>{this.filterEl=t},this.deselectRemovedItems=tt.bind(this),this.deselectSiblingItems=et.bind(this),this.selectSiblings=it.bind(this),this.handleFilter=at.bind(this),this.getItemData=nt.bind(this),this.keyDownHandler=X.bind(this)}connectedCallback(){K.call(this),M.call(this)}disconnectedCallback(){B.call(this)}calciteListItemRemoveHandler(t){Q.call(this,t)}calciteListItemChangeHandler(t){q.call(this,t)}calciteListItemPropsChangeHandler(t){t.stopPropagation(),this.setUpFilter()}calciteListItemValueChangeHandler(t){Y.call(this,t)}calciteListFocusOutHandler(t){W.call(this,t)}setUpItems(){N.call(this,"calcite-pick-list-item")}setUpFilter(){this.filterEnabled&&(this.dataForFilter=this.getItemData())}async getSelectedItems(){return this.selectedValues}async setFocus(t){return Z.call(this,t)}getIconType(){return this.multiple?g.square:g.circle}render(){return c(lt,{onKeyDown:this.keyDownHandler,props:this})}get el(){return this}static get style(){return ot}};u=C(u,[1,"calcite-pick-list",{disabled:[516],filterEnabled:[516,"filter-enabled"],filterPlaceholder:[513,"filter-placeholder"],headingLevel:[2,"heading-level"],loading:[516],multiple:[516],selectionFollowsFocus:[4,"selection-follows-focus"],selectedValues:[32],dataForFilter:[32],getSelectedItems:[64],setFocus:[64]},[[0,"calciteListItemRemove","calciteListItemRemoveHandler"],[0,"calciteListItemChange","calciteListItemChangeHandler"],[0,"calciteListItemPropsChange","calciteListItemPropsChangeHandler"],[0,"calciteListItemValueChange","calciteListItemValueChangeHandler"],[0,"focusout","calciteListFocusOutHandler"]]]);function H(){if(typeof customElements=="undefined")return;["calcite-pick-list","calcite-filter","calcite-icon","calcite-input","calcite-loader","calcite-progress","calcite-scrim"].forEach(e=>{switch(e){case"calcite-pick-list":customElements.get(e)||customElements.define(e,u);break;case"calcite-filter":customElements.get(e)||_();break;case"calcite-icon":customElements.get(e)||D();break;case"calcite-input":customElements.get(e)||F();break;case"calcite-loader":customElements.get(e)||x();break;case"calcite-progress":customElements.get(e)||S();break;case"calcite-scrim":customElements.get(e)||L();break}})}H();const wt=u,yt=H;export{wt as CalcitePickList,yt as defineCustomElement};
