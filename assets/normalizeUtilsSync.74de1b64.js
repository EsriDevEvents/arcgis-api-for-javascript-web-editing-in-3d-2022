import{bQ as j,br as w,ir as L,is as g,it as R,iu as X,iv as k,iw as z,ix as B,iy as Q,iz as b,iA as q,iB as h}from"./vendor.1dc52be5.js";function K(i){if(!i)return null;let t=null;const m=i.spatialReference,s=w(m);if(!s)return"toJSON"in i?i.toJSON():i;const e=L(m)?102100:4326,x=g[e].maxX,n=g[e].minX,l=g[e].plus180Line,f=g[e].minus180Line;let c;const a="toJSON"in i?i.toJSON():i;if(R(a))c=A(a,x,n);else if(X(a))a.points=a.points.map(r=>A(r,x,n)),c=a;else if(k(a))c=D(a,s);else if(z(a)||B(a)){const r=G;Q(r,a);const o={xmin:r[0],ymin:r[1],xmax:r[2],ymax:r[3]},u=h(o.xmin,n)*(2*x),y=u===0?a:C(a,u);o.xmin+=u,o.xmax+=u,b(o,l)&&o.xmax!==x||b(o,f)&&o.xmin!==n?t=y:c=y}else c=a;return t!==null?new F().cut(t,x):c}function C(i,t){const m=q(i);for(const s of m)for(const e of s)e[0]+=t;return i}function D(i,t){if(!t)return i;const m=E(i,t).map(s=>s.extent);return m.length<2?m[0]||i:m.length>2?(i.xmin=t.valid[0],i.xmax=t.valid[1],i):{rings:m.map(s=>[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]])}}function A(i,t,m){if(Array.isArray(i)){const s=i[0];if(s>t){const e=h(s,t);i[0]=s+e*(-2*t)}else if(s<m){const e=h(s,m);i[0]=s+e*(-2*m)}}else{const s=i.x;if(s>t){const e=h(s,t);i.x+=e*(-2*t)}else if(s<m){const e=h(s,m);i.x+=e*(-2*m)}}return i}function E(i,t){const m=[],{ymin:s,ymax:e}=i,x=i.xmax-i.xmin,n=i.xmin,l=i.xmax;let f;const[c,a]=t.valid;f=P(i.xmin,t);const r=f.x,o=f.frameId;f=P(i.xmax,t);const u=f.x,y=f.frameId,$=r===u&&x>0;if(x>2*a){const M={xmin:n<l?r:u,ymin:s,xmax:a,ymax:e},N={xmin:c,ymin:s,xmax:n<l?u:r,ymax:e},O={xmin:0,ymin:s,xmax:a,ymax:e},S={xmin:c,ymin:s,xmax:0,ymax:e},p=[],d=[];v(M,O)&&p.push(o),v(M,S)&&d.push(o),v(N,O)&&p.push(y),v(N,S)&&d.push(y);for(let I=o+1;I<y;I++)p.push(I),d.push(I);m.push({extent:M,frameIds:[o]},{extent:N,frameIds:[y]},{extent:O,frameIds:p},{extent:S,frameIds:d})}else r>u||$?m.push({extent:{xmin:r,ymin:s,xmax:a,ymax:e},frameIds:[o]},{extent:{xmin:c,ymin:s,xmax:u,ymax:e},frameIds:[y]}):m.push({extent:{xmin:r,ymin:s,xmax:u,ymax:e},frameIds:[o]});return m}function P(i,t){const[m,s]=t.valid,e=2*s;let x,n=0;return i>s?(x=Math.ceil(Math.abs(i-s)/e),i-=x*e,n=x):i<m&&(x=Math.ceil(Math.abs(i-m)/e),i+=x*e,n=-x),{x:i,frameId:n}}function v(i,t){const{xmin:m,ymin:s,xmax:e,ymax:x}=t;return J(i,m,s)&&J(i,m,x)&&J(i,e,x)&&J(i,e,s)}function J(i,t,m){return t>=i.xmin&&t<=i.xmax&&m>=i.ymin&&m<=i.ymax}class F{cut(t,m){let s;if(t.rings)this.closed=!0,s=t.rings,this.minPts=4;else{if(!t.paths)return null;this.closed=!1,s=t.paths,this.minPts=2}const e=s.length,x=-2*m;for(let n=0;n<e;n++){const l=s[n];if(l&&l.length>=this.minPts){const f=[];for(const c of l)f.push([c[0]+x,c[1]]);s.push(f)}}return this.closed?t.rings=s:t.paths=s,t}}const G=j();export{K as u};
